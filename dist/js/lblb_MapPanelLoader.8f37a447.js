(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["lblb_MapPanelLoader"],{"00ba":function(t,e,n){},"00fd":function(t,e,n){var r=n("9e69"),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;function l(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(l){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}t.exports=l},"0293":function(t,e,n){var r=n("241e"),i=n("53e2");n("ce7e")("getPrototypeOf",function(){return function(t){return i(r(t))}})},"03dd":function(t,e,n){var r=n("eac5"),i=n("57a5"),o=Object.prototype,a=o.hasOwnProperty;function s(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}t.exports=s},"061b":function(t,e,n){t.exports=n("fa99")},"07c7":function(t,e){function n(){return!1}t.exports=n},"07d8":function(t,e,n){"use strict";var r=n("5aee"),i=n("9f79"),o="Set";t.exports=n("ada4")(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,o),t=0===t?0:t,t)}},r)},"0a90":function(t,e,n){var r=n("63b6"),i=n("10ff");r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},"0b07":function(t,e,n){var r=n("34ac"),i=n("3698");function o(t,e){var n=i(t,e);return r(n)?n:void 0}t.exports=o},"0b64":function(t,e,n){var r=n("f772"),i=n("9003"),o=n("5168")("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},"0d24":function(t,e,n){(function(t){var r=n("2b3e"),i=n("07c7"),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,l=s?r.Buffer:void 0,u=l?l.isBuffer:void 0,c=u||i;t.exports=c}).call(this,n("62e4")(t))},"0f0d":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:this.mapPanelContainerClass,attrs:{id:"map-panel-container"}},[t._m(0),n("map_",{class:{"mb-map-with-widget":this.$store.state.cyclomedia.active||this.$store.state.pictometry.active},attrs:{id:"map-tag",center:this.mapCenter,zoom:this.$store.state.map.zoom,"zoom-control-position":"bottomright","min-zoom":this.$config.map.minZoom,"max-zoom":22},on:{"l-click":t.handleMapClick,"l-moveend":t.handleMapMove}},["Polygon"===this.selectedPopupLayerGeometryType||"MultiPolygon"===this.selectedPopupLayerGeometryType?n("polygon_",{attrs:{color:"#00ffff",fill:!1,weight:5,latlngs:this.selectedPopupLayerCoordinatesFlipped,pane:"highlightOverlay"}}):t._e(),"LineString"===this.selectedPopupLayerGeometryType?n("polyline_",{attrs:{color:"#00ffff",weight:4,latlngs:this.selectedPopupLayerCoordinatesFlipped,pane:"highlightOverlay"}}):t._e(),"Point"===this.selectedPopupLayerGeometryType?n("circle-marker",{attrs:{latlng:this.selectedPopupLayerCoordinatesFlipped,radius:7,fillColor:"#00ffff",color:"#00ffff",weight:this.locationMarker.weight,opacity:this.locationMarker.opacity,fillOpacity:this.locationMarker.fillOpacity,pane:"highlightOverlay"}}):t._e(),n("esri-web-map",t._l(this.$store.state.map.webMapLayersAndRest,function(e,r){return t.shouldShowFeatureLayer(e)?n("esri-web-map-layer",{key:r,attrs:{layer:e.layer,layerName:e.title,layerDefinition:e.rest.layerDefinition,opacity:e.opacity,type:e.type2}}):t._e()}),1),this.shouldShowPopup?n("pop-up",[n("pop-up-content")],1):t._e(),t._l(this.$config.map.basemaps,function(e,r){return t.activeBasemap===r?n("esri-tiled-map-layer",{key:r,attrs:{name:r,url:e.url,"max-zoom":e.maxZoom,zIndex:e.zIndex,attribution:e.attribution}}):t._e()}),t._l(this.$config.map.tiledLayers,function(e,r){return t.activeTiles.includes(r)?n("esri-tiled-map-layer",{key:r,attrs:{name:r,url:e.url,zIndex:e.zIndex,attribution:e.attribution}}):t._e()}),t._l(t.markers,function(t,e){return n("vector-marker",{key:t.key,attrs:{latlng:t.latlng,markerColor:t.color,icon:t.icon}})}),this.cyclomediaActive?n("png-marker",{attrs:{icon:"images/camera.png",latlng:t.cycloLatlng,rotationAngle:t.cycloRotationAngle}}):t._e(),this.cyclomediaActive?n("svg-view-cone-marker",{attrs:{latlng:t.cycloLatlng,rotationAngle:t.cycloRotationAngle,hFov:t.cycloHFov}}):t._e(),n("control-corner",{attrs:{vSide:"top",hSide:"almostright"}}),n("control-corner",{attrs:{vSide:"top",hSide:"almostleft"}}),t._m(2),t._m(3),t._m(5),t._m(7),this.measureControlEnabled?t._m(8):t._e(),t._m(10),t._m(11),this.addressAutocompleteEnabled?n("map-address-candidate-list",{attrs:{position:this.addressInputPosition,widthFromConfig:this.addressInputWidth}}):t._e(),null!=this.$store.state.map.location.lat?n("circle-marker",{attrs:{latlng:this.locationMarker.latlng,radius:this.locationMarker.radius,fillColor:this.locationMarker.fillColor,color:this.locationMarker.color,weight:this.locationMarker.weight,opacity:this.locationMarker.opacity,fillOpacity:this.locationMarker.fillOpacity,pane:"highlightOverlay"}}):t._e(),t._l(t.cyclomediaRecordings,function(e){return t.cyclomediaActive?n("cyclomedia-recording-circle",{key:e.imageId,attrs:{imageId:e.imageId,latlng:[e.lat,e.lng],size:1.2,color:"#3388ff",weight:1},on:{"l-click":t.handleCyclomediaRecordingClick}}):t._e()})],2),n("modal-about"),t._t("cycloWidget"),t._t("pictWidget")],2)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("full-screen-map-toggle-tab")},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("basemap-toggle-control",{attrs:{position:"topright"}})},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.shouldShowImageryToggle?t._m(1):t._e()],1)},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("basemap-select-control",{attrs:{position:"topalmostright"}})],1)},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pictometry-button",{attrs:{position:"topright",link:"pictometry",imgSrc:"images/pictometry.png"}})},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[this.shouldShowPictometryButton?t._m(4):t._e()],1)},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("cyclomedia-button",{attrs:{position:"topright",link:"cyclomedia",imgSrc:"images/cyclomedia.png"},on:{click:t.handleCyclomediaButtonClick}})},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[this.shouldShowCyclomediaButton?t._m(6):t._e()],1)},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("measure-control",{attrs:{position:"bottomleft"}})],1)},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("location-control",{attrs:{position:"bottomright"},on:{click:t.handleButtonClick}})},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[this.geolocationEnabled?t._m(9):t._e()],1)},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("map-address-input",{attrs:{position:this.addressInputPosition,placeholder:this.addressInputPlaceholder,widthFromConfig:this.addressInputWidth}})],1)}],o=(n("6762"),n("2fdb"),n("db0c")),a=n.n(o),s=n("a745"),l=n.n(s);function u(t){if(l()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var c=n("774e"),f=n.n(c),p=n("c8bb"),h=n.n(p);function d(t){if(h()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return f()(t)}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function y(t){return u(t)||d(t)||m()}var g={computed:{markers:function(){var t=[],e=this.geocodeGeom;if(e){var n=y(e.coordinates).reverse(),r=this.geocodeResult.properties.street_address,i="#2176d2",o="geocode",a={prefix:"fas",icon:"map-marker-alt",shadow:!0,size:50},s={latlng:n,key:r,color:i,markerType:o,icon:a};t.push(s)}return t},locationMarker:function(){var t=[this.$store.state.map.location.lat,this.$store.state.map.location.lng],e={latlng:t,radius:6,fillColor:"#ff3f3f",color:"#ff0000",weight:1,opacity:1,fillOpacity:1};return e}}},v={name:"cyclomediaMixin",computed:{cyclomediaActive(){return this.$store.state.cyclomedia.active},cyclomediaRecordings(){return this.$store.state.cyclomedia.recordings}},methods:{handleCyclomediaButtonClick(){this.updateCyclomediaRecordings()},handleCyclomediaRecordingClick(t){const e=t.latlng;console.log("handleCyclomediaRecordingClick is running, latlng:",e),this.$store.commit("setCyclomediaLatLngFromMap",e)},updateCyclomediaRecordings(){const t=this.$store.state.map.map,e=t.getZoom();if(!this.$store.state.cyclomedia.active||e<=18)return void this.$store.commit("setCyclomediaRecordings",[]);const n=t.getBounds();this.$cyclomediaRecordingsClient.getRecordings(n,t=>{this.$store.commit("setCyclomediaRecordings",t)})}}},b={name:"pictometryMixin",computed:{pictometryActive(){return this.$store.state.pictometry.active}}},_=n("1157"),S=n.n(_),x=n("bc3a"),w=n.n(x);class C{constructor(t,e,n,r=3857,i){this.baseUrl=t,this.username=e,this.password=n,this.srid=r,this.proxy=i}getRecordings(t,e){const n=t.getSouthWest(),r=t.getNorthEast(),i=`<wfs:GetFeature service="WFS" version="1.1.0" resultType="results" outputFormat="text/xml; subtype=gml/3.1.1" xmlns:wfs="http://www.opengis.net/wfs">\n\t\t\t\t\t\t\t\t\t\t\t<wfs:Query typeName="atlas:Recording" srsName="EPSG:${this.srid}" xmlns:atlas="http://www.cyclomedia.com/atlas">\n\t\t\t\t\t\t\t\t\t\t\t\t<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc">\n\t\t\t\t\t\t    \t\t\t\t\t<ogc:And>\n\t\t\t\t\t\t      \t\t\t\t\t<ogc:BBOX>\n\t\t\t\t\t\t\t\t\t\t\t        <gml:Envelope srsName="EPSG:${this.srid}" xmlns:gml="http://www.opengis.net/gml">\n\t\t\t\t\t\t\t\t\t\t\t          <gml:lowerCorner>${n.lng} ${n.lat}</gml:lowerCorner>\n\t\t\t\t\t\t\t\t\t\t\t          <gml:upperCorner>${r.lng} ${r.lat}</gml:upperCorner>\n\t\t\t\t\t\t\t\t\t\t\t        </gml:Envelope>\n\t\t\t\t\t\t\t\t\t\t\t      </ogc:BBOX>\n\t\t\t\t\t\t\t\t\t\t\t      <ogc:PropertyIsNull>\n\t\t\t\t\t\t\t\t\t\t\t        <ogc:PropertyName>expiredAt</ogc:PropertyName>\n\t\t\t\t\t\t\t\t\t\t\t      </ogc:PropertyIsNull>\n\t\t\t\t\t\t\t\t\t\t\t    </ogc:And>\n\t\t\t\t\t\t\t\t\t\t\t  </ogc:Filter>\n\t\t\t\t\t\t\t\t\t\t\t </wfs:Query>\n\t\t\t\t\t\t\t\t\t\t\t</wfs:GetFeature>`,o=(this.proxy||"")+this.baseUrl;S.a.ajax({url:o,data:i,type:"POST",contentType:"text/xml",headers:{Authorization:"Basic "+window.btoa(this.username+":"+this.password)},success(t){console.log("got recordings",t);const n=t.getElementsByTagNameNS("*","Recording"),r=[].slice.call(n);if(r.length<1)return void console.log("no cyclomedia recordings for bounds");const i=r.map(t=>{const e=t.getElementsByTagNameNS("*","imageId")[0].firstChild.data,n=t.getElementsByTagNameNS("*","pos")[0].firstChild.data,[r,i]=n.split(" ").map(parseFloat);return{imageId:e,lng:r,lat:i}});e(i)},error(t,e,n){console.log(t.status),console.log(n)}})}}var M,k,I,E,P=C,$=n("e11e"),O={name:"ControlCorner",props:["vSide","hSide"],render:function(t){},methods:{parentMounted:function(t){var e=t.$leafletElement;e._controlCorners[this.vSide+this.hSide]=$["DomUtil"].create("div","leaflet-"+this.vSide+" leaflet-"+this.hSide,e._controlContainer)}}},T=O,j=(n("9331"),n("2877")),D=Object(j["a"])(T,M,k,!1,null,null,null),F=D.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return this.isMobileOrTablet?t._e():n("div",{staticClass:"toggle-tab",style:{top:t.buttonPosition},attrs:{id:"toggle-tab"},on:{click:t.handleFullScreenMapToggleButtonClick}},[n("span",{staticClass:"align-span"},[n("font-awesome-icon",{staticClass:"fa-2x",attrs:{icon:this.currentIcon}})],1)])},A=[],z=(n("a481"),n("59ad")),B=n.n(z),G={name:"FullScreenMapToggleTab",data:function(){return{divHeight:0,buttonPosition:0}},mounted:function(){window.addEventListener("resize",this.setDivHeight),this.setDivHeight()},computed:{fullScreenMapEnabled:function(){return this.$store.state.fullScreenMapEnabled},fullScreenTopicsEnabled:function(){return this.$store.state.fullScreenTopicsEnabled},isMobileOrTablet:function(){return this.$store.state.isMobileOrTablet},cyclomediaActive:function(){return this.$store.state.cyclomedia.active},pictometryActive:function(){return this.$store.state.pictometry.active},picOrCycloActive:function(){return!(!this.cyclomediaActive&&!this.pictometryActive)},currentIcon:function(){return this.fullScreenMapEnabled?"caret-right":"caret-left"}},watch:{picOrCycloActive:function(t){this.setDivHeight()},fullScreenTopicsEnabled:function(){this.setDivHeight()}},methods:{setDivHeight:function(){var t=document.getElementById("map-tag"),e=window.getComputedStyle(t),n=B()(e.getPropertyValue("height").replace("px",""));this.buttonPosition=(n-48)/2+"px"},handleFullScreenMapToggleButtonClick:function(t){var e=this.$store.state.fullScreenMapEnabled,n=!e;this.$store.commit("setFullScreenMapEnabled",n)}}},R=G,J=(n("852f"),Object(j["a"])(R,N,A,!1,null,"6402e722",null)),V=J.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:this.mapContainerClass},[n("div",{ref:"map",staticClass:"map",attrs:{id:"map"}}),n("div",[t._t("default")],2)])},U=[],q=n("768b"),H=n("a8db"),X=n("5d73"),Y=n.n(X),Z=n("76b3"),K={name:"Map_",props:["center","zoom","zoomControlPosition","minZoom","maxZoom"],mounted:function(){var t=this.$leafletElement=this.createLeafletElement();t.zoomControl.setPosition(this.$props.zoomControlPosition),this.$store.commit("setMap",{map:t}),this.setMapView(this.center),this.$nextTick(function(){t.attributionControl.setPrefix('<a target="_blank" href="//www.phila.gov/it/aboutus/units/Pages/GISServicesGroup.aspx">City of Philadelphia | CityGeo</a>')});var e=!0,n=!1,r=void 0;try{for(var i,o=Y()(this.$children);!(e=(i=o.next()).done);e=!0){var a=i.value;a.parentMounted(this,a.$props)}}catch(s){n=!0,r=s}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}Object(Z["a"])(this,this.$leafletElement,this._events),this.$config.map.clickToIdentifyFeatures&&t.on("click",this.identifyFeatures)},watch:{center:function(t){this.setMapView(t)},zoom:function(t){t&&(this.$leafletElement.setZoom(t),this.$store.commit("setMapZoom",t))},mapBounds:function(t){console.log("watch nextBounds is firing, nextBounds:",t,"this.$leafletElement:",this.$leafletElement),this.setMapBounds(t)},fullScreenMapEnabled:function(){this.$leafletElement.invalidateSize()},webMapDisplayedLayers:function(t){var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=Y()(this.intersectingFeatures);!(n=(o=a.next()).done);n=!0){var s=o.value;e.push(s.feature.layerName)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}console.log("map.vue watch nextWebMapDisplayedLayers:",t,"intersectingLayers:",e);for(var l=0;l<e.length;l++){var u=e[l];if(!t.includes(u))return void this.$store.commit("setIntersectingFeatures",[])}}},computed:{mapContainerClass:function(){return this.$config.map.containerClass?this.$config.map.containerClass:"map-container"},fullScreenMapEnabled:function(){return this.$store.state.fullScreenMapEnabled},mapBounds:function(){return this.$store.state.map.bounds},webMapDisplayedLayers:function(){return this.$store.state.map.webMapDisplayedLayers},intersectingFeatures:function(){return this.$store.state.map.intersectingFeatures}},methods:{createLeafletElement:function(){var t=this.$props,e=(t.zoomControlPosition,Object(H["a"])(t,["zoomControlPosition"]));return new $["Map"](this.$refs.map,e)},childDidMount:function(t){t.addTo(this.$leafletElement)},setMapView:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom;if(0!==t.length){var n=Object(q["a"])(t,2),r=n[0],i=n[1],o=new $["LatLng"](i,r);this.$leafletElement.setView(o,e)}},setMapBounds:function(t){if(t._northEast){var e=this.$leafletElement;e.fitBounds([[t._northEast.lat,t._northEast.lng],[t._southWest.lat,t._southWest.lng]])}},identifyFeatures:function(t){var e,n=this.$leafletElement,r=new $["LatLngBounds"](t.latlng,t.latlng),i=[];for(var o in n._layers){var a=n._layers[o];if(a._layers)for(var s in a._layers){var l=a._layers[s];if(l.feature){e=l.feature.geometry.type;var u=void 0;"Polygon"===e||"MultiPolygon"===e?l.contains(t.latlng)&&this.checkForDuplicates(o,l,i):"LineString"===e?(u=l.getBounds(),u&&r.intersects(u)&&this.checkForDuplicates(o,l,i)):"Point"===e&&(u=new $["LatLngBounds"](l._latlng,l._latlng),u&&r.intersects(u)&&this.checkForDuplicates(o,l,i))}}}this.$store.commit("setPopupCoords",t.latlng),this.$store.commit("setIntersectingFeatures",i)},checkForDuplicates:function(t,e,n){for(var r=[],i=0;i<n.length;i++)r[i]=t+"_"+n[i].feature.id;r.includes(t+"_"+e.feature.id)||n.push(e)}}},Q=K,tt=(n("fdc8"),Object(j["a"])(Q,W,U,!1,null,null,null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"leaflet-bar easy-button-container leaflet-control"},[n("button",{on:{click:t.handleLocationButtonClick}},[n("span",{staticClass:"button-state state-unnamed-state unnamed-state-active"},[n("font-awesome-icon",{staticClass:"fa-lg",attrs:{icon:this.computedIcon}})],1)])])},rt=[],it=n("5176"),ot=n.n(it),at=n("f0a4"),st=(at["default"].props,at["default"].methods),lt={name:"LocationControl",props:["position"],data:function(){return{locationOn:!1}},computed:{computedIcon:function(){return this.$config.geolocation&&this.$config.geolocation.icon?this.$config.geolocation.icon:"dot-circle"}},methods:ot()(st,{handleLocationButtonClick:function(t){var e=this.$store.state.map.watchPositionOn;e?this.moveToPosition():(this.$store.commit("setWatchPositionOn",!0),navigator.geolocation.watchPosition(this.geofindSuccess,this.geofindError,{enableHighAccuracy:!0,timeout:1e3,maximumAge:0,distanceFilter:5}))},geofindSuccess:function(t){var e={lat:t.coords.latitude,lng:t.coords.longitude};this.$store.commit("setLocation",e),this.locationOn||(this.moveToPosition(),this.locationOn=!0)},moveToPosition:function(){var t=this.$store.state.map.map,e=this.$store.state.map.location;t.setView([e.lat,e.lng],19)},geofindError:function(){console.log("GeofindError")}})},ut=lt,ct=Object(j["a"])(ut,nt,rt,!1,null,"13a0d48e",null),ft=ct.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"leaflet-bar easy-button-container leaflet-control"},[n("button",{on:{click:t.handleImageryToggleButtonClick}},[n("span",{staticClass:"button-state state-unnamed-state unnamed-state-active"},[n("img",{staticClass:"button-image",attrs:{src:t.toggleButtonImgSrc}})])])])},ht=[],dt=(at["default"].props,at["default"].methods),mt={name:"BasemapToggleControl",props:["position"],computed:{toggleButtonImgSrc:function(){var t,e=this.$store.state.map.shouldShowImagery;return t=e?"images/basemap_small.png":"images/imagery_small.png",t}},methods:ot()(dt,{handleImageryToggleButtonClick:function(t){var e=this.$store.state.map.shouldShowImagery,n=!e;this.$store.commit("setShouldShowImagery",n)}})},yt=mt,gt=(n("386e"),Object(j["a"])(yt,pt,ht,!1,null,"45b10352",null)),vt=gt.exports,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowImagery,expression:"shouldShowImagery"}]},[n("select",{attrs:{id:"year-select"},on:{change:t.handleImageryChange}},t._l(t.imageryTypes,function(e,r){return n("optgroup",{attrs:{label:e.label}},t._l(t.basemapsForImageryType(r),function(e){return n("option",{attrs:{"data-key":e.key}},[t._v("\n        "+t._s(e.label)+"\n      ")])}),0)}),0)])},_t=[],St=n("a4bb"),xt=n.n(St),wt=(at["default"].props,at["default"].methods),Lt={name:"BasemapSelectControl",props:["position"],computed:{shouldShowImagery:function(){return this.$store.state.map.shouldShowImagery},imageryTypes:function(){return this.$config.map.imageryTypes},currentImagery:function(){return this.$store.state.map.imagery}},watch:{currentImagery:function(t){var e=t.replace(/\D/g,""),n=document.getElementById("year-select");n.value=e}},methods:ot()(wt,{handleImageryChange:function(){var t=document.getElementById("year-select"),e=t.options[t.selectedIndex].parentElement.label,n=t.options[t.selectedIndex].value,r=e.toLowerCase()+n;this.$store.commit("setImagery",r)},basemapsForImageryType:function(t){var e=this.$config.map.basemaps,n=xt()(e),r=[],i=!0,o=!1,a=void 0;try{for(var s,l=Y()(n);!(i=(s=l.next()).done);i=!0){var u=s.value,c=e[u],f=c.type;if(f===t){var p=c.label;r.push({type:f,label:p})}}}catch(h){o=!0,a=h}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r}})},Ct=Lt,Mt=Object(j["a"])(Ct,bt,_t,!1,null,"fa591c7e",null),kt=Mt.exports,It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"leaflet-bar easy-button-container leaflet-control"},[n("button",{class:this.pictometryActive,on:{click:function(e){return e.preventDefault(),t.handleButtonClick(e)}}},[n("span",{staticClass:"button-state"},[n("img",{staticClass:"button-image",attrs:{src:t.imgSrc}})])])])},Et=[],Pt={name:"PictometryButton",extends:at["default"],props:["link","imgSrc"],computed:{pictometryActive:function(){return this.$store.state.pictometry.active?"active":"inactive"}},methods:{handleButtonClick:function(t){this.$store.commit("setPictometryActive",!this.$store.state.pictometry.active)}}},$t=Pt,Ot=(n("3450"),Object(j["a"])($t,It,Et,!1,null,"b937f62e",null)),Tt=Ot.exports,jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"leaflet-bar easy-button-container leaflet-control"},[n("button",{staticClass:"cyclomedia-button",class:this.cyclomediaActive,on:{click:function(e){return e.preventDefault(),t.handleButtonClick(e)}}},[n("span",{staticClass:"button-state"},[n("img",{staticClass:"button-image",attrs:{src:t.imgSrc}})])])])},Dt=[],Ft={name:"CyclomediaButton",extends:at["default"],props:["link","imgSrc"],created:function(){this.$cyclomediaRecordingsClient=new P(this.$config.cyclomedia.recordingsUrl,this.$config.cyclomedia.username,this.$config.cyclomedia.password,4326)},computed:{cyclomediaInitialized:function(){return this.$store.state.cyclomedia.initialized},cyclomediaActive:function(){return this.$store.state.cyclomedia.active?"active":"inactive"}},methods:{handleButtonClick:function(t){this.cyclomediaInitialized||this.$store.commit("setCyclomediaInitialized",!0);var e=!this.$store.state.cyclomedia.active;this.$store.commit("setCyclomediaActive",e)}}},Nt=Ft,At=(n("c865"),Object(j["a"])(Nt,jt,Dt,!1,null,"023c20c2",null)),zt=At.exports,Bt=n("84ae"),Gt=n.n(Bt),Rt={name:"MeasureControl",props:["position"],mounted:function(){this.$leafletElement=this.createLeafletElement()},destroyed:function(){this.$leafletElement._map.removeControl(this.$leafletElement)},render:function(t){},methods:{createLeafletElement:function(){var t=this.$props.position;return new Gt.a({position:t,primaryLengthUnit:"feet",primaryAreaUnit:"sqfeet"})},parentMounted:function(t){var e=t.$leafletElement;e.addControl(this.$leafletElement)}}},Jt=Rt,Vt=Object(j["a"])(Jt,I,E,!1,null,null,null),Wt=Vt.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:this.shouldShowLegend,expression:"this.shouldShowLegend"}]},[n("div",{staticClass:"legend"},[n("ul",{staticClass:"legend-list"},t._l(this.keys,function(e){return n("li",{staticClass:"legend-listitem",style:"font-size:"+t.items[e]["font-size"]+";"},[n("div",{staticClass:"legend-box",style:"background-color:"+t.items[e]["background-color"]+"; border-color:"+t.items[e]["border-color"]+"; border-style:"+t.items[e]["border-style"]+"; border-width:"+t.items[e]["border-weight"]+"; width:"+t.items[e].width+"; height:"+t.items[e].height+";"}),n("div",{staticClass:"list-text"},[t._v("\n          "+t._s(e)+"\n        ")])])}),0)])])},qt=[],Ht=(at["default"].props,at["default"].methods),Xt={name:"LegendControl",props:["position","options","items"],computed:{keys:function(){return xt()(this.$props.items)},activeTopic:function(){return this.$store.state.activeTopic},shouldShowImagery:function(){return this.$store.state.map.shouldShowImagery},shouldShowLegend:function(){var t=!0;return this.$props.options.topics.includes(this.activeTopic)||(t=!1),this.$props.options.showWithBaseMapOnly&&this.shouldShowImagery&&(t=!1),t}},methods:ot()(Ht)},Yt=Xt,Zt=(n("7e02"),Object(j["a"])(Yt,Ut,qt,!1,null,null,null)),Kt=Zt.exports,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:"pvm-search-control-container "+this.containerClass,style:this.containerStyle},[n("form",{staticClass:"pvm-search-control-form",attrs:{autocomplete:"off",id:"search-form"},on:{submit:function(e){return e.preventDefault(),t.handleSearchFormSubmit(e)}}},[n("input",{class:"pvm-search-control-input "+this.inputClass,style:this.inputStyle,attrs:{id:t.inputID,placeholder:this.$props.placeholder||"Search the map",tabindex:"0"},domProps:{value:this.addressEntered},on:{keyup:t.didType}})]),""!=this.addressEntered&&null!=this.addressEntered?n("button",{class:"pvm-search-control-button "+this.buttonClass,on:{click:t.handleFormX}},[n("font-awesome-icon",{attrs:{icon:"times"}})],1):t._e(),n("button",{class:"pvm-search-control-button "+this.buttonClass,attrs:{name:"pvm-search-control-button",tabindex:"-1"},on:{click:this.handleSearchFormSubmit}},[n("font-awesome-icon",{attrs:{icon:"search"}})],1),t._t("address-candidates-slot")],2)},te=[],ee=(n("6b54"),n("d225")),ne=n("b0b4"),re=n("308d"),ie=n("6bb5"),oe=n("4e2b");function ae(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var se=ae,le=n("5ea3"),ue="object"==typeof self&&self&&self.Object===Object&&self,ce=le["a"]||ue||Function("return this")(),fe=ce,pe=function(){return fe.Date.now()},he=pe,de=fe.Symbol,me=de,ye=Object.prototype,ge=ye.hasOwnProperty,ve=ye.toString,be=me?me.toStringTag:void 0;function _e(t){var e=ge.call(t,be),n=t[be];try{t[be]=void 0;var r=!0}catch(o){}var i=ve.call(t);return r&&(e?t[be]=n:delete t[be]),i}var Se=_e,xe=Object.prototype,we=xe.toString;function Le(t){return we.call(t)}var Ce=Le,Me="[object Null]",ke="[object Undefined]",Ie=me?me.toStringTag:void 0;function Ee(t){return null==t?void 0===t?ke:Me:Ie&&Ie in Object(t)?Se(t):Ce(t)}var Pe=Ee;function $e(t){return null!=t&&"object"==typeof t}var Oe=$e,Te="[object Symbol]";function je(t){return"symbol"==typeof t||Oe(t)&&Pe(t)==Te}var De=je,Fe=NaN,Ne=/^\s+|\s+$/g,Ae=/^[-+]0x[0-9a-f]+$/i,ze=/^0b[01]+$/i,Be=/^0o[0-7]+$/i,Ge=parseInt;function Re(t){if("number"==typeof t)return t;if(De(t))return Fe;if(se(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=se(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ne,"");var n=ze.test(t);return n||Be.test(t)?Ge(t.slice(2),n?2:8):Ae.test(t)?Fe:+t}var Je=Re,Ve="Expected a function",We=Math.max,Ue=Math.min;function qe(t,e,n){var r,i,o,a,s,l,u=0,c=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError(Ve);function h(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n),a}function d(t){return u=t,s=setTimeout(g,e),c?h(t):a}function m(t){var n=t-l,r=t-u,i=e-n;return f?Ue(i,o-r):i}function y(t){var n=t-l,r=t-u;return void 0===l||n>=e||n<0||f&&r>=o}function g(){var t=he();if(y(t))return v(t);s=setTimeout(g,m(t))}function v(t){return s=void 0,p&&r?h(t):(r=i=void 0,a)}function b(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0}function _(){return void 0===s?a:v(he())}function S(){var t=he(),n=y(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return d(l);if(f)return s=setTimeout(g,e),h(l)}return void 0===s&&(s=setTimeout(g,e)),a}return e=Je(e)||0,se(n)&&(c=!!n.leading,f="maxWait"in n,o=f?We(Je(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),S.cancel=b,S.flush=_,S}var He=qe;function Xe(){return"id-"+Math.random().toString(36).substring(7)}var Ye=Xe,Ze={name:"MapAddressInput",props:["position","widthFromConfig","placeholder"],data:function(){var t={containerStyle:{width:"305px"},inputStyle:{width:"250px"},inputID:Ye(),addressEntered:null};return t},created:function(){window.addEventListener("resize",this.handleWindowResize),this.handleWindowResize()},watch:{addressEntered:function(t){this.handleWindowResize()}},computed:{map:function(){return this.$store.state.map.map},inputWidth:function(){return""===this.addressEntered||null===this.addressEntered?this.$props.widthFromConfig-55:this.$props.widthFromConfig-108},inputClass:function(){return this.isMobileOrTablet?"pvm-input-mobile":"pvm-input-non-mobile"},containerClass:function(){return this.isMobileOrTablet?"pvm-container-mobile":"pvm-container-non-mobile"},buttonClass:function(){return this.isMobileOrTablet?"pvm-button-mobile":"pvm-button-non-mobile"},addressAutocompleteEnabled:function(){return!!this.$config.addressInput&&!0===this.$config.addressInput.autocompleteEnabled},isMobileOrTablet:function(){return this.$store.state.isMobileOrTablet}},methods:{createLeafletElement:function(t){var e=function(e){function n(t,e){var r;return Object(ee["a"])(this,n),r=Object(re["a"])(this,Object(ie["a"])(n).call(this,e)),r.el=t,r}return Object(oe["a"])(n,e),Object(ne["a"])(n,[{key:"onAdd",value:function(){var e=this.el;return t.DomEvent.disableClickPropagation(e),t.DomEvent.disableScrollPropagation(e),e}}]),n}(t.Control),n=this.$el;return new e(n,{position:this.position})},parentMounted:function(t,e){var n=this.createLeafletElement($);this.$leafletElement=n;var r=this.map;n.addTo(r)},didType:He(function(t){var e=t.target.value;if(this.$data.addressEntered=e,this.addressAutocompleteEnabled){if("ArrowDown"===t.key)return void document.getElementById("address-candidate-list-0").focus();this.getCandidates(e),"Enter"!==t.key&&this.$store.commit("setShouldShowAddressCandidateList",!0)}},300),getCandidates:function(t){w.a.get("https://cqvfg1pm72.execute-api.us-east-1.amazonaws.com/dev/first-api-test/",{params:{address:t}}).then(this.didGetCandidates).catch(this.didGetCandidatesError)},didGetCandidates:function(t){var e=t.data.matches,n=e.map(function(t){return t.address});this.$store.commit("setCandidates",n)},didGetCandidatesError:function(t){console.log("error getting candidates",t),this.$store.commit("setCandidates",[])},handleFormX:function(){console.log("handleFormX is running"),this.$data.addressEntered="",this.$store.commit("setShouldShowAddressCandidateList",!1),this.$store.commit("setCandidates",[])},handleSearchFormSubmit:function(){var t;console.log("handleSearchFormSubmit is running"),t=this.addressAutocompleteEnabled?addressEntered:document.querySelector("#"+this.$data.inputID.toString()).value,this.$controller.handleSearchFormSubmit(t)},handleWindowResize:function(){var t=this.addressEntered;window.innerWidth>=850?(this.containerStyle.width=this.$props.widthFromConfig+"px",this.inputStyle.width=""===t||null===t?this.$props.widthFromConfig-55+"px":this.$props.widthFromConfig-108+"px"):window.innerWidth>=750?(this.containerStyle.width=this.$props.widthFromConfig-100+"px",this.inputStyle.width=""===t||null===t?this.$props.widthFromConfig-155+"px":this.$props.widthFromConfig-208+"px"):(this.containerStyle.width="300px",this.inputStyle.width=""===t||null===t?"245px":"192px")}}},Ke=Ze,Qe=(n("2fe1"),Object(j["a"])(Ke,Qt,te,!1,null,"6cd40095",null)),tn=Qe.exports,en=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("default")],2)},nn=[],rn=n("b6d0"),on=n.n(rn),an=(n("28a5"),n("55dd"),n("371e")),sn={name:"WebMap",computed:{webmapId:function(){return this.$config.webmapId}},methods:{parentMounted:function(t){var e=this,n=this,r=this.$store.state.map.map,i="https://www.arcgis.com/sharing/rest/content/items/"+this.webmapId+"/data",o={dataType:"json",webmapId:this.webmapId},a=[];w.a.get(i,{params:o}).then(function(t){var i,o=t.data;i=e.$config.bundled?e.$webMap=an["webMap"](e.webmapId,{map:r}):e.$webMap=L.esri.webMap(e.webmapId,{map:r}),n.$store.commit("setWebMap",i),i.on("load",function(){r.attributionControl.setPrefix('<a target="_blank" href="//www.phila.gov/it/aboutus/units/Pages/GISServicesGroup.aspx">City of Philadelphia | CityGeo</a>');var t=["CityBasemap","CityBasemap_Labels"],e={},s=!0,l=!1,u=void 0;try{for(var c,p=Y()(i.layers);!(s=(c=p.next()).done);s=!0){var h=c.value,d=h.title;if(!t.includes(d)&&d.includes("_")){var m=d.split("_")[1];h.layer.service?e[m]=h.layer.service.options.url.replace("https://","").replace("http://","").replace(/\/$/,"").toLowerCase():h.layer._layers&&(e[m]=h.layer._layers[xt()(h.layer._layers)[0]].service.options.url.replace("https://","").replace("http://","").replace(/\/$/,"").toLowerCase())}}}catch(k){l=!0,u=k}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}n.$store.commit("setLayerUrls",e);var y=o.operationalLayers,g=!0,v=!1,b=void 0;try{for(var _,S=function(){var t=_.value;if("CityBasemap"===t.title)return"continue";var e=void 0,n=!0,r=!1,i=void 0;try{for(var o,s=Y()(y);!(n=(o=s.next()).done);n=!0){var l=o.value;l.title===t.title&&(e=l)}}catch(k){r=!0,i=k}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}var u="https://www.arcgis.com/sharing/rest/content/items/"+e.itemId,c=Ye(),p={category:t.title.split("_")[0],title:t.title.split("_")[1],layer:t.layer,id:c,serviceItemId:null,rest:e,opacity:e.opacity,type:e.layerType,type2:t.type,legend:null,tags:null,tagsString:null},h={};e.itemId?L.esri.request(u,h,function(t,e){if(t)a.push(p),a.sort(function(t,e){var n=t.title.toLowerCase(),r=e.title.toLowerCase();return n<r?-1:n>r?1:0});else{var n=e.tags.map(function(t){return"string"===typeof t?t.toLowerCase():t}),r=f()(new on.a(n));p.tags=r,p.tagsString=e.tags.join(),a.push(p),a.sort(function(t,e){var n=t.title.toLowerCase(),r=e.title.toLowerCase();return n<r?-1:n>r?1:0})}}):(a.push(p),a.sort(function(t,e){var n=t.title.toLowerCase(),r=e.title.toLowerCase();return n<r?-1:n>r?1:0}))},x=Y()(i.layers);!(g=(_=x.next()).done);g=!0)S()}catch(k){v=!0,b=k}finally{try{g||null==x.return||x.return()}finally{if(v)throw b}}for(var w=[""],C=0;C<a.length;C++){var M=a[C];w.includes(M.category)||w.push(M.category)}w.sort(function(t,e){var n=t.toLowerCase(),r=e.toLowerCase();return n<r?-1:n>r?1:0}),n.$store.commit("setWebMapLayersAndRest",a),n.$store.commit("setCategories",w),r.createPane("highlightOverlay")})},function(t){console.log("AXIOS ERROR WebMap.vue")})}}},ln=sn,un=Object(j["a"])(ln,en,nn,!1,null,null,null),cn=un.exports,fn={name:"MapPanel",mixins:[g,v,b],components:{Control:function(){return Promise.resolve().then(n.bind(null,"f0a4"))},MapAddressCandidateList:function(){return n.e("lbmp_pvm_MapAddressCandidateList").then(n.bind(null,"6e28"))},EsriTiledMapLayer:function(){return n.e("lbmp_pvm_EsriTiledMapLayer").then(n.bind(null,"5218"))},EsriTiledOverlay:function(){return n.e("lbmp_pvm_EsriTiledOverlay").then(n.bind(null,"ef0b"))},EsriDynamicMapLayer:function(){return n.e("lbmp_pvm_EsriDynamicMapLayer").then(n.bind(null,"8c8b"))},EsriFeatureLayer:function(){return n.e("lbmp_pvm_EsriFeatureLayer").then(n.bind(null,"9c4f"))},EsriWebMap:cn,EsriWebMapLayer:cn,ModalAbout:function(){return n.e("lbmp_pvm_ModalAbout").then(n.bind(null,"f66c"))},Geojson:function(){return n.e("lbmp_pvm_Geojson").then(n.bind(null,"1c8b"))},CircleMarker:function(){return n.e("lbmp_pvm_CircleMarker").then(n.bind(null,"03ae"))},VectorMarker:function(){return n.e("lbmp_pvm_VectorMarker").then(n.bind(null,"38b8"))},PngMarker:function(){return n.e("lbmp_pvm_PngMarker").then(n.bind(null,"da65"))},CyclomediaRecordingCircle:function(){return n.e("lbmp_pvm_CyclomediaRecordingCircle").then(n.bind(null,"3105"))},SvgViewConeMarker:function(){return n.e("lbmp_pvm_CyclomediaSvgViewConeMarker").then(n.bind(null,"2683"))},BasemapTooltip:function(){return n.e("lbmp_pvm_BasemapTooltip").then(n.bind(null,"be2e"))},ControlCorner:F,FullScreenMapToggleTab:V,Map_:et,LocationControl:ft,BasemapToggleControl:vt,BasemapSelectControl:kt,PictometryButton:Tt,CyclomediaButton:zt,MeasureControl:Wt,LegendControl:Kt,MapAddressInput:tn},mounted:function(){this.$controller.appDidLoad()},computed:{mapCenter:function(){return this.$store.state.map.center},addressAutocompleteEnabled:function(){return!!this.$config.addressInput&&!0===this.$config.addressInput.autocompleteEnabled},addressInputPosition:function(){return this.isMobileOrTablet?"topleft":"topalmostleft"},addressInputWidth:function(){return this.$config.addressInput?this.$config.addressInput.mapWidth:415},addressInputPlaceholder:function(){return this.$config.addressInput?this.$config.addressInput.placeholder:null},isMobileOrTablet:function(){return this.$store.state.isMobileOrTablet},fullScreenMapEnabled:function(){return this.$store.state.fullScreenMapEnabled},windowWidth:function(){return this.$store.state.windowWidth},mapPanelContainerClass:function(){return this.fullScreenMapEnabled?"medium-24 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map":this.windowWidth>=950?"medium-16 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map":"medium-14 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map"},cycloLatlng:function(){if(null!==this.$store.state.cyclomedia.orientation.xyz){var t=this.$store.state.cyclomedia.orientation.xyz;return[t[1],t[0]]}var e=this.$config.map.center;return e},cycloRotationAngle:function(){return 57.29577951307855*this.$store.state.cyclomedia.orientation.yaw},cycloHFov:function(){return this.$store.state.cyclomedia.orientation.hFov},shouldShowCyclomediaButton:function(){return this.$config.cyclomedia.enabled&&!this.isMobileOrTablet},shouldShowPictometryButton:function(){return this.$config.pictometry.enabled&&!this.isMobileOrTablet},shouldShowPopup:function(){return this.intersectingFeatures.length>0},selectedPopupLayer:function(){return this.$store.state.map.selectedPopupLayer},selectedPopupLayerGeometryType:function(){return this.selectedPopupLayer?this.selectedPopupLayer.feature.geometry.type:null},selectedPopupLayerCoordinates:function(){return"Point"===this.selectedPopupLayerGeometryType||"LineString"===this.selectedPopupLayerGeometryType?this.selectedPopupLayer.feature.geometry.coordinates:"Polygon"===this.selectedPopupLayerGeometryType?this.selectedPopupLayer.feature.geometry.coordinates[0]:"MultiPolygon"===this.selectedPopupLayerGeometryType?this.selectedPopupLayer.feature.geometry.coordinates:void 0},selectedPopupLayerCoordinatesFlipped:function(){return"Point"===this.selectedPopupLayerGeometryType?this.flipCoords(this.selectedPopupLayerCoordinates):"MultiPolygon"!==this.selectedPopupLayerGeometryType?this.flipCoordsArray(this.selectedPopupLayerCoordinates):this.flipCoordsMultiPolygon(this.selectedPopupLayerCoordinates)},intersectingFeatures:function(){return this.$store.state.map.intersectingFeatures},geolocationEnabled:function(){return this.$config.geolocation.enabled},scale:function(){return this.$store.state.map.scale},webMapActiveLayers:function(){return this.$store.state.map.webMapActiveLayers},activeBasemap:function(){var t=this.$store.state.map.shouldShowImagery;if(t)return this.$store.state.map.imagery;var e=this.$config.map.defaultBasemap,n=this.$store.state.map.basemap||e;return n},activeTiles:function(){return this.$config.map.basemaps[this.activeBasemap]?this.$config.map.basemaps[this.activeBasemap].tiledLayers:[]},basemaps:function(){return a()(this.$config.map.basemaps)},shouldShowImageryToggle:function(){return this.hasImageryBasemaps&&this.$config.map.imagery.enabled},imageryBasemaps:function(){return this.basemaps.filter(function(t){return"imagery"===t.type})},hasImageryBasemaps:function(){return this.imageryBasemaps.length>0},imageryYears:function(){return this.imageryBasemaps.map(function(t){return t.year})},historicBasemaps:function(){return this.basemaps.filter(function(t){return"historic"===t.type})},hasHistoricBasemaps:function(){return this.historicBasemaps.length>0},historicYears:function(){return this.historicBasemaps.map(function(t){return t.year})},geocodeResult:function(){return this.$store.state.geocode.data},geocodeGeom:function(){return(this.geocodeResult||{}).geometry},picOrCycloActive:function(){return!(!this.cyclomediaActive&&!this.pictometryActive)},measureControlEnabled:function(){return!1!==this.$config.measureControlEnabled}},created:function(){var t=this.$config.defaultAddress;t&&this.$controller.goToDefaultAddress(t);var e=this.$config.cyclomedia||{};e.enabled&&(this.$cyclomediaRecordingsClient=new P(this.$config.cyclomedia.recordingsUrl,this.$config.cyclomedia.username,this.$config.cyclomedia.password,4326))},watch:{picOrCycloActive:function(t){var e=this;this.$nextTick(function(){e.$store.state.map.map.invalidateSize()})}},methods:{flipCoords:function(t){return[t[1],t[0]]},flipCoordsArray:function(t){var e=[];for(var n in t)e[n]=[t[n][1],t[n][0]];return e},flipCoordsMultiPolygon:function(t){var e=[];for(var n in t){var r=[];for(var i in t[n][0])r[i]=[t[n][0][i][1],t[n][0][i][0]];e[n]=r}return e},shouldShowFeatureLayer:function(t){if(!t.rest.layerDefinition)return!!this.webMapActiveLayers.includes(t.title);if(t.rest.layerDefinition.minScale){if(this.scale<=t.rest.layerDefinition.minScale&&this.webMapActiveLayers.includes(t.title))return!0}else if(t.rest.layerDefinition.drawingInfo&&this.webMapActiveLayers.includes(t.title))return!0},handleMapClick:function(){document.getElementsByClassName("pvm-search-control-input")[0].blur()},handleButtonClick:function(){document.getElementsByClassName("pvm-search-control-input")[0].blur()},handleMapMove:function(t){var e=this.$store.state.map.map,n=this.$config.pictometry||{},r=e.getCenter(),i=r.lat,o=r.lng,a=[o,i],s=e.getZoom();this.$store.commit("setMapZoom",s);var l=this.$config.map.scales[s];if(this.$store.commit("setMapScale",l),n.enabled){this.$store.commit("setPictometryMapCenter",a);var u=e.getZoom();this.$store.commit("setPictometryMapZoom",u)}var c=this.$config.cyclomedia||{};c.enabled&&(this.updateCyclomediaRecordings(),this.$store.commit("setCyclomediaLatLngFromMap",[i,o]))}}},pn=fn,hn=(n("7760"),Object(j["a"])(pn,r,i,!1,null,"aad0d05c",null));e["default"]=hn.exports},1:function(t,e){},"100e":function(t,e,n){var r=n("cd9d"),i=n("2286"),o=n("c1c9");function a(t,e){return o(i(t,e,r),t+"")}t.exports=a},"10ff":function(t,e,n){var r=n("e53d").parseFloat,i=n("a1ce").trim;t.exports=1/r(n("e692")+"-0")!==-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},1173:function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},1310:function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},1368:function(t,e,n){var r=n("da03"),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function o(t){return!!i&&i in t}t.exports=o},"13c8":function(t,e,n){var r=n("c3a1"),i=n("36c3"),o=n("355d").f;t.exports=function(t){return function(e){var n,a=i(e),s=r(a),l=s.length,u=0,c=[];while(l>u)o.call(a,n=s[u++])&&c.push(t?[n,a[n]]:a[n]);return c}}},"1a8c":function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},"1df8":function(t,e,n){var r=n("63b6");r(r.S,"Object",{setPrototypeOf:n("ead6").set})},"20fd":function(t,e,n){"use strict";var r=n("d9f6"),i=n("aebd");t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},2286:function(t,e,n){var r=n("85e3"),i=Math.max;function o(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){var o=arguments,a=-1,s=i(o.length-e,0),l=Array(s);while(++a<s)l[a]=o[e+a];a=-1;var u=Array(e+1);while(++a<e)u[a]=o[a];return u[e]=n(l),r(t,this,u)}}t.exports=o},"253c":function(t,e,n){var r=n("3729"),i=n("1310"),o="[object Arguments]";function a(t){return i(t)&&r(t)==o}t.exports=a},"25b0":function(t,e,n){n("1df8"),t.exports=n("584a").Object.setPrototypeOf},"266a":function(t,e,n){var r=n("7948");function i(t,e){return r(e,function(e){return t[e]})}t.exports=i},"29f3":function(t,e){var n=Object.prototype,r=n.toString;function i(t){return r.call(t)}t.exports=i},"2b3e":function(t,e,n){var r=n("585a"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},"2dcb":function(t,e,n){var r=n("91e9"),i=r(Object.getPrototypeOf,Object);t.exports=i},"2ec1":function(t,e,n){var r=n("100e"),i=n("9aff");function o(t){return r(function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);while(++r<o){var l=n[r];l&&t(e,l,r,a)}return e})}t.exports=o},"2f21":function(t,e,n){"use strict";var r=n("79e5");t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},"2fdb":function(t,e,n){"use strict";var r=n("5ca1"),i=n("d2c8"),o="includes";r(r.P+r.F*n("5147")(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"2fe1":function(t,e,n){"use strict";var r=n("5385"),i=n.n(r);i.a},"308d":function(t,e,n){"use strict";var r=n("7618");function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){return!e||"object"!==Object(r["a"])(e)&&"function"!==typeof e?i(t):e}n.d(e,"a",function(){return o})},"30c9":function(t,e,n){var r=n("9520"),i=n("b218");function o(t){return null!=t&&i(t.length)&&!r(t)}t.exports=o},"324a":function(t,e){t.exports=i,t.exports.parse=i,t.exports.stringify=o;var n=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,r=new RegExp("^"+n.source+"(\\s"+n.source+"){1,}");function i(t){var e=t.split(";"),n=e.pop(),i=(e.shift()||"").split("=").pop(),o=0;function a(t){var e=n.substring(o).match(t);return e?(o+=e[0].length,e[0]):null}function s(t){return t&&i.match(/\d+/)&&(t.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+i}}),t}function l(){a(/^\s*/)}function u(){l();var t,e=0,n=[],i=[n],o=n;while(t=a(/^(\()/)||a(/^(\))/)||a(/^(\,)/)||a(r)){if("("===t)i.push(o),o=[],i[i.length-1].push(o),e++;else if(")"===t){if(0===o.length)return null;if(o=i.pop(),!o)return null;if(e--,0===e)break}else if(","===t)o=[],i[i.length-1].push(o);else{if(t.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(o,t.split(/\s/g).map(parseFloat))}l()}return 0!==e?null:n}function c(){var t,e,n=[];while(e=a(r)||a(/^(\,)/))","===e?(n.push(t),t=[]):e.split(/\s/g).some(isNaN)||(t||(t=[]),Array.prototype.push.apply(t,e.split(/\s/g).map(parseFloat))),l();return t?(n.push(t),n.length?n:null):null}function f(){if(!a(/^(point)/i))return null;if(l(),!a(/^(\()/))return null;var t=c();return t?(l(),a(/^(\))/)?{type:"Point",coordinates:t[0]}:null):null}function p(){if(!a(/^(multipoint)/i))return null;l();var t=n.substring(n.indexOf("(")+1,n.length-1).replace(/\(/g,"").replace(/\)/g,"");n="MULTIPOINT ("+t+")";var e=u();return e?(l(),{type:"MultiPoint",coordinates:e}):null}function h(){if(!a(/^(multilinestring)/i))return null;l();var t=u();return t?(l(),{type:"MultiLineString",coordinates:t}):null}function d(){if(!a(/^(linestring)/i))return null;if(l(),!a(/^(\()/))return null;var t=c();return t&&a(/^(\))/)?{type:"LineString",coordinates:t}:null}function m(){if(!a(/^(polygon)/i))return null;l();var t=u();return t?{type:"Polygon",coordinates:t}:null}function y(){if(!a(/^(multipolygon)/i))return null;l();var t=u();return t?{type:"MultiPolygon",coordinates:t}:null}function g(){var t,e=[];if(!a(/^(geometrycollection)/i))return null;if(l(),!a(/^(\()/))return null;while(t=v())e.push(t),l(),a(/^(\,)/),l();return a(/^(\))/)?{type:"GeometryCollection",geometries:e}:null}function v(){return f()||d()||m()||p()||h()||y()||g()}return s(v())}function o(t){function e(t){return t.join(" ")}function n(t){return t.map(e).join(", ")}function r(t){return t.map(n).map(a).join(", ")}function i(t){return t.map(r).map(a).join(", ")}function a(t){return"("+t+")"}switch("Feature"===t.type&&(t=t.geometry),t.type){case"Point":return"POINT ("+e(t.coordinates)+")";case"LineString":return"LINESTRING ("+n(t.coordinates)+")";case"Polygon":return"POLYGON ("+r(t.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+n(t.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+i(t.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+r(t.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+t.geometries.map(o).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}},"32b3":function(t,e,n){var r=n("872a"),i=n("9638"),o=Object.prototype,a=o.hasOwnProperty;function s(t,e,n){var o=t[e];a.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}t.exports=s},3450:function(t,e,n){"use strict";var r=n("f02b"),i=n.n(r);i.a},"34ac":function(t,e,n){var r=n("9520"),i=n("1368"),o=n("1a8c"),a=n("dc57"),s=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,f=u.toString,p=c.hasOwnProperty,h=RegExp("^"+f.call(p).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(t){if(!o(t)||i(t))return!1;var e=r(t)?h:l;return e.test(a(t))}t.exports=d},3698:function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},"36ec":function(t,e,n){"use strict";var r=n("ffb7"),i=n("4b41"),o=/(Lat)(itude)?/gi,a=/(L)(on|ng)(gitude)?/i;function s(t,e){var n,r,i;for(var o in t)r=o.match(e),r&&(!n||r[0].length/o.length>i)&&(i=r[0].length/o.length,n=o);return n}function l(t){return s(t,o)}function u(t){return s(t,a)}function c(t){return!!t.match(o)}function f(t){return!!t.match(a)}function p(t){return"object"==typeof t?Object.keys(t).length:0}function h(t){var e=[",",";","\t","|"],n=[];return e.forEach(function(e){var i=r.dsvFormat(e).parse(t);if(i.length>=1){for(var o=p(i[0]),a=0;a<i.length;a++)if(p(i[a])!==o)return;n.push({delimiter:e,arity:Object.keys(i[0]).length})}}),n.length?n.sort(function(t,e){return e.arity-t.arity})[0].delimiter:null}function d(t){return delete t.columns,t}function m(t){var e=h(t);return e?d(r.dsvFormat(e).parse(t)):null}function y(t,e,n){n||(n=e,e={}),e.delimiter=e.delimiter||",";var o=e.latfield||"",a=e.lonfield||"",s=e.crs||"",c=[],f={type:"FeatureCollection",features:c};if(""!==s&&(f.crs={type:"name",properties:{name:s}}),"auto"!==e.delimiter||"string"!=typeof t||(e.delimiter=h(t),e.delimiter)){var p="string"==typeof t?r.dsvFormat(e.delimiter).parse(t):t;if(p.length){var d,m=[];o||(o=l(p[0])),a||(a=u(p[0]));var y=!o||!a;if(y){for(d=0;d<p.length;d++)c.push({type:"Feature",properties:p[d],geometry:null});n(m.length?m:null,f)}else{for(d=0;d<p.length;d++)if(void 0!==p[d][a]&&void 0!==p[d][o]){var g,v,b,_=p[d][a],S=p[d][o];b=i(_,"EW"),b&&(_=b),b=i(S,"NS"),b&&(S=b),g=parseFloat(_),v=parseFloat(S),isNaN(g)||isNaN(v)?m.push({message:"A row contained an invalid value for latitude or longitude",row:p[d],index:d}):(e.includeLatLon||(delete p[d][a],delete p[d][o]),c.push({type:"Feature",properties:p[d],geometry:{type:"Point",coordinates:[parseFloat(g),parseFloat(v)]}}))}n(m.length?m:null,f)}}else n(null,f)}else n({type:"Error",message:"Could not autodetect delimiter"})}function g(t){for(var e=t.features,n={type:"Feature",geometry:{type:"LineString",coordinates:[]}},r=0;r<e.length;r++)n.geometry.coordinates.push(e[r].geometry.coordinates);return n.properties=e.reduce(function(t,e){for(var n in e.properties)t[n]||(t[n]=[]),t[n].push(e.properties[n]);return t},{}),{type:"FeatureCollection",features:[n]}}function v(t){for(var e=t.features,n={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},r=0;r<e.length;r++)n.geometry.coordinates[0].push(e[r].geometry.coordinates);return n.properties=e.reduce(function(t,e){for(var n in e.properties)t[n]||(t[n]=[]),t[n].push(e.properties[n]);return t},{}),{type:"FeatureCollection",features:[n]}}t.exports={isLon:f,isLat:c,guessLatHeader:l,guessLonHeader:u,csv:r.csvParse,tsv:r.tsvParse,dsv:r,auto:m,csv2geojson:y,toLine:g,toPolygon:v}},3702:function(t,e,n){var r=n("481b"),i=n("5168")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},"371e":function(t,e,n){(function(t,r){r(e,n("e11e"),n("73a4"))})(0,function(t,e,n){"use strict";e="default"in e?e["default"]:e,n="default"in n?n["default"]:n;var r="0.4.0";function i(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function o(t){return i(t[0],t[t.length-1])||t.push(t[0]),t}function a(t){var e,n=0,r=0,i=t.length,o=t[r];for(r;r<i-1;r++)e=t[r+1],n+=(e[0]-o[0])*(e[1]+o[1]),o=e;return n>=0}function s(t,e,n,r){var i=(r[0]-n[0])*(t[1]-n[1])-(r[1]-n[1])*(t[0]-n[0]),o=(e[0]-t[0])*(t[1]-n[1])-(e[1]-t[1])*(t[0]-n[0]),a=(r[1]-n[1])*(e[0]-t[0])-(r[0]-n[0])*(e[1]-t[1]);if(0!==a){var s=i/a,l=o/a;if(s>=0&&s<=1&&l>=0&&l<=1)return!0}return!1}function l(t,e){for(var n=0;n<t.length-1;n++)for(var r=0;r<e.length-1;r++)if(s(t[n],t[n+1],e[r],e[r+1]))return!0;return!1}function u(t,e){for(var n=!1,r=-1,i=t.length,o=i-1;++r<i;o=r)(t[r][1]<=e[1]&&e[1]<t[o][1]||t[o][1]<=e[1]&&e[1]<t[r][1])&&e[0]<(t[o][0]-t[r][0])*(e[1]-t[r][1])/(t[o][1]-t[r][1])+t[r][0]&&(n=!n);return n}function c(t,e){var n=l(t,e),r=u(t,e[0]);return!(n||!r)}function f(t){for(var e,n,r,i=[],s=[],u=0;u<t.length;u++){var f=o(t[u].slice(0));if(!(f.length<4))if(a(f)){var p=[f];i.push(p)}else s.push(f)}var h=[];while(s.length){r=s.pop();var d=!1;for(e=i.length-1;e>=0;e--)if(n=i[e][0],c(n,r)){i[e].push(r),d=!0;break}d||h.push(r)}while(h.length){r=h.pop();var m=!1;for(e=i.length-1;e>=0;e--)if(n=i[e][0],l(n,r)){i[e].push(r),m=!0;break}m||i.push([r.reverse()])}return 1===i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}function p(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function h(t,e){var n={};return"number"===typeof t.x&&"number"===typeof t.y&&(n.type="Point",n.coordinates=[t.x,t.y]),t.points&&(n.type="MultiPoint",n.coordinates=t.points.slice(0)),t.paths&&(1===t.paths.length?(n.type="LineString",n.coordinates=t.paths[0].slice(0)):(n.type="MultiLineString",n.coordinates=t.paths.slice(0))),t.rings&&(n=f(t.rings.slice(0))),(t.geometry||t.attributes)&&(n.type="Feature",n.geometry=t.geometry?h(t.geometry):null,n.properties=t.attributes?p(t.attributes):null,t.attributes&&(n.id=t.attributes[e]||t.attributes.OBJECTID||t.attributes.FID)),JSON.stringify(n.geometry)===JSON.stringify({})&&(n.geometry=null),n}var d=e.Class.extend({initialize:function(t,e){this._symbolJson=t,this.val=null,this._styles={},this._isDefault=!1,this._layerTransparency=1,e&&e.layerTransparency&&(this._layerTransparency=1-e.layerTransparency/100)},pixelValue:function(t){return 1.333*t},colorValue:function(t){return"rgb("+t[0]+","+t[1]+","+t[2]+")"},alphaValue:function(t){var e=t[3]/255;return e*this._layerTransparency},getSize:function(t,e){var n=t.properties,r=e.field,i=0,o=null;if(r){o=n[r];var a,s=e.minSize,l=e.maxSize,u=e.minDataValue,c=e.maxDataValue,f=e.normalizationField,p=n?parseFloat(n[f]):void 0;if(null===o||f&&(isNaN(p)||0===p))return null;isNaN(p)||(o/=p),null!==s&&null!==l&&null!==u&&null!==c&&(o<=u?i=s:o>=c?i=l:(a=(o-u)/(c-u),i=s+a*(l-s))),i=isNaN(i)?0:i}return i},getColor:function(t,e){if(!(t.properties&&e&&e.field&&e.stops))return null;var n,r,i,o,a=t.properties,s=a[e.field],l=e.normalizationField,u=a?parseFloat(a[l]):void 0;if(null===s||l&&(isNaN(u)||0===u))return null;if(isNaN(u)||(s/=u),s<=e.stops[0].value)return e.stops[0].color;var c=e.stops[e.stops.length-1];if(s>=c.value)return c.color;for(var f=0;f<e.stops.length;f++){var p=e.stops[f];if(p.value<=s)n=p.color,i=p.value;else if(p.value>s){r=p.color,o=p.value;break}}if(!isNaN(i)&&!isNaN(o)){var h=o-i;if(h>0){var d=(s-i)/h;if(d){var m=(o-s)/h;if(m){for(var y=[],g=0;g<4;g++)y[g]=Math.round(n[g]*m+r[g]*d);return y}return r}return n}}return null}}),m=e.Path.extend({initialize:function(t,n,r){e.setOptions(this,r),this._size=n,this._latlng=e.latLng(t),this._svgCanvasIncludes()},toGeoJSON:function(){return e.GeoJSON.getFeature(this,{type:"Point",coordinates:e.GeoJSON.latLngToCoords(this.getLatLng())})},_svgCanvasIncludes:function(){},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_update:function(){this._map&&this._updatePath()},_updatePath:function(){},setLatLng:function(t){return this._latlng=e.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setSize:function(t){return this._size=t,this.redraw()},getSize:function(){return this._size}}),y=m.extend({initialize:function(t,e,n){m.prototype.initialize.call(this,t,e,n)},_updatePath:function(){this._renderer._updateCrossMarker(this)},_svgCanvasIncludes:function(){e.Canvas.include({_updateCrossMarker:function(t){var e=t._point,n=t._size/2,r=this._ctx;r.beginPath(),r.moveTo(e.x,e.y+n),r.lineTo(e.x,e.y-n),this._fillStroke(r,t),r.moveTo(e.x-n,e.y),r.lineTo(e.x+n,e.y),this._fillStroke(r,t)}}),e.SVG.include({_updateCrossMarker:function(t){var n=t._point,r=t._size/2;e.Browser.vml&&(n._round(),r=Math.round(r));var i="M"+n.x+","+(n.y+r)+"L"+n.x+","+(n.y-r)+"M"+(n.x-r)+","+n.y+"L"+(n.x+r)+","+n.y;this._setPath(t,i)}})}}),g=function(t,e,n){return new y(t,e,n)},v=m.extend({initialize:function(t,e,n){m.prototype.initialize.call(this,t,e,n)},_updatePath:function(){this._renderer._updateXMarker(this)},_svgCanvasIncludes:function(){e.Canvas.include({_updateXMarker:function(t){var e=t._point,n=t._size/2,r=this._ctx;r.beginPath(),r.moveTo(e.x+n,e.y+n),r.lineTo(e.x-n,e.y-n),this._fillStroke(r,t)}}),e.SVG.include({_updateXMarker:function(t){var n=t._point,r=t._size/2;e.Browser.vml&&(n._round(),r=Math.round(r));var i="M"+(n.x+r)+","+(n.y+r)+"L"+(n.x-r)+","+(n.y-r)+"M"+(n.x-r)+","+(n.y+r)+"L"+(n.x+r)+","+(n.y-r);this._setPath(t,i)}})}}),b=function(t,e,n){return new v(t,e,n)},_=m.extend({options:{fill:!0},initialize:function(t,e,n){m.prototype.initialize.call(this,t,e,n)},_updatePath:function(){this._renderer._updateSquareMarker(this)},_svgCanvasIncludes:function(){e.Canvas.include({_updateSquareMarker:function(t){var e=t._point,n=t._size/2,r=this._ctx;r.beginPath(),r.moveTo(e.x+n,e.y+n),r.lineTo(e.x-n,e.y+n),r.lineTo(e.x-n,e.y-n),r.lineTo(e.x+n,e.y-n),r.closePath(),this._fillStroke(r,t)}}),e.SVG.include({_updateSquareMarker:function(t){var n=t._point,r=t._size/2;e.Browser.vml&&(n._round(),r=Math.round(r));var i="M"+(n.x+r)+","+(n.y+r)+"L"+(n.x-r)+","+(n.y+r)+"L"+(n.x-r)+","+(n.y-r)+"L"+(n.x+r)+","+(n.y-r);i+=e.Browser.svg?"z":"x",this._setPath(t,i)}})}}),S=function(t,e,n){return new _(t,e,n)},x=m.extend({options:{fill:!0},initialize:function(t,e,n){m.prototype.initialize.call(this,t,e,n)},_updatePath:function(){this._renderer._updateDiamondMarker(this)},_svgCanvasIncludes:function(){e.Canvas.include({_updateDiamondMarker:function(t){var e=t._point,n=t._size/2,r=this._ctx;r.beginPath(),r.moveTo(e.x,e.y+n),r.lineTo(e.x-n,e.y),r.lineTo(e.x,e.y-n),r.lineTo(e.x+n,e.y),r.closePath(),this._fillStroke(r,t)}}),e.SVG.include({_updateDiamondMarker:function(t){var n=t._point,r=t._size/2;e.Browser.vml&&(n._round(),r=Math.round(r));var i="M"+n.x+","+(n.y+r)+"L"+(n.x-r)+","+n.y+"L"+n.x+","+(n.y-r)+"L"+(n.x+r)+","+n.y;i+=e.Browser.svg?"z":"x",this._setPath(t,i)}})}}),w=function(t,e,n){return new x(t,e,n)},L=d.extend({statics:{MARKERTYPES:["esriSMSCircle","esriSMSCross","esriSMSDiamond","esriSMSSquare","esriSMSX","esriPMS"]},initialize:function(t,e){var n;if(d.prototype.initialize.call(this,t,e),e&&(this.serviceUrl=e.url),t)if("esriPMS"===t.type){var r=this._symbolJson.url;r&&"http://"===r.substr(0,7)||"https://"===r.substr(0,8)?(n=this.sanitize(r),this._iconUrl=n):(n=this.serviceUrl+"images/"+r,this._iconUrl=e&&e.token?n+"?token="+e.token:n),t.imageData&&(this._iconUrl="data:"+t.contentType+";base64,"+t.imageData),this._icons={},this.icon=this._createIcon(this._symbolJson)}else this._fillStyles()},sanitize:function(t){if(!t)return"";var e;try{e=t.replace(/<br>/gi,"\n"),e=e.replace(/<p.*>/gi,"\n"),e=e.replace(/<a.*href='(.*?)'.*>(.*?)<\/a>/gi," $2 ($1) "),e=e.replace(/<(?:.|\s)*?>/g,"")}catch(n){e=null}return e},_fillStyles:function(){this._symbolJson.outline&&this._symbolJson.size>0&&"esriSLSNull"!==this._symbolJson.outline.style?(this._styles.stroke=!0,this._styles.weight=this.pixelValue(this._symbolJson.outline.width),this._styles.color=this.colorValue(this._symbolJson.outline.color),this._styles.opacity=this.alphaValue(this._symbolJson.outline.color)):this._styles.stroke=!1,this._symbolJson.color?(this._styles.fillColor=this.colorValue(this._symbolJson.color),this._styles.fillOpacity=this.alphaValue(this._symbolJson.color)):this._styles.fillOpacity=0,"esriSMSCircle"===this._symbolJson.style&&(this._styles.radius=this.pixelValue(this._symbolJson.size)/2)},_createIcon:function(t){var n=this.pixelValue(t.width),r=n;t.height&&(r=this.pixelValue(t.height));var i=n/2,o=r/2;t.xoffset&&(i+=this.pixelValue(t.xoffset)),t.yoffset&&(o+=this.pixelValue(t.yoffset));var a=e.icon({iconUrl:this._iconUrl,iconSize:[n,r],iconAnchor:[i,o]});return this._icons[t.width.toString()]=a,a},_getIcon:function(t){var e=this._icons[t.toString()];return e||(e=this._createIcon({width:t})),e},pointToLayer:function(t,n,r,i){var o=this._symbolJson.size||this._symbolJson.width;if(!this._isDefault){if(r.sizeInfo){var a=this.getSize(t,r.sizeInfo);a&&(o=a)}if(r.colorInfo){var s=this.getColor(t,r.colorInfo);s&&(this._styles.fillColor=this.colorValue(s),this._styles.fillOpacity=this.alphaValue(s))}}if("esriPMS"===this._symbolJson.type){var l=e.extend({},{icon:this._getIcon(o)},i);return e.marker(n,l)}switch(o=this.pixelValue(o),this._symbolJson.style){case"esriSMSSquare":return S(n,o,e.extend({},this._styles,i));case"esriSMSDiamond":return w(n,o,e.extend({},this._styles,i));case"esriSMSCross":return g(n,o,e.extend({},this._styles,i));case"esriSMSX":return b(n,o,e.extend({},this._styles,i))}return this._styles.radius=o/2,e.circleMarker(n,e.extend({},this._styles,i))}});function C(t,e){return new L(t,e)}var M=d.extend({statics:{LINETYPES:["esriSLSDash","esriSLSDot","esriSLSDashDotDot","esriSLSDashDot","esriSLSSolid"]},initialize:function(t,e){d.prototype.initialize.call(this,t,e),this._fillStyles()},_fillStyles:function(){if(this._styles.lineCap="butt",this._styles.lineJoin="miter",this._styles.fill=!1,this._styles.weight=0,!this._symbolJson)return this._styles;if(this._symbolJson.color&&(this._styles.color=this.colorValue(this._symbolJson.color),this._styles.opacity=this.alphaValue(this._symbolJson.color)),!isNaN(this._symbolJson.width)){this._styles.weight=this.pixelValue(this._symbolJson.width);var t=[];switch(this._symbolJson.style){case"esriSLSDash":t=[4,3];break;case"esriSLSDot":t=[1,3];break;case"esriSLSDashDot":t=[8,3,1,3];break;case"esriSLSDashDotDot":t=[8,3,1,3,1,3];break}if(t.length>0){for(var e=0;e<t.length;e++)t[e]*=this._styles.weight;this._styles.dashArray=t.join(",")}}},style:function(t,e){if(!this._isDefault&&e){if(e.sizeInfo){var n=this.pixelValue(this.getSize(t,e.sizeInfo));n&&(this._styles.weight=n)}if(e.colorInfo){var r=this.getColor(t,e.colorInfo);r&&(this._styles.color=this.colorValue(r),this._styles.opacity=this.alphaValue(r))}}return this._styles}});function k(t,e){return new M(t,e)}var I=d.extend({statics:{POLYGONTYPES:["esriSFSSolid"]},initialize:function(t,e){d.prototype.initialize.call(this,t,e),t&&(t.outline&&"esriSLSNull"===t.outline.style?this._lineStyles={weight:0}:this._lineStyles=k(t.outline,e).style(),this._fillStyles())},_fillStyles:function(){if(this._lineStyles)if(0===this._lineStyles.weight)this._styles.stroke=!1;else for(var t in this._lineStyles)this._styles[t]=this._lineStyles[t];this._symbolJson&&(this._symbolJson.color&&I.POLYGONTYPES.indexOf(this._symbolJson.style>=0)?(this._styles.fill=!0,this._styles.fillColor=this.colorValue(this._symbolJson.color),this._styles.fillOpacity=this.alphaValue(this._symbolJson.color)):(this._styles.fill=!1,this._styles.fillOpacity=0))},style:function(t,e){if(!this._isDefault&&e&&e.colorInfo){var n=this.getColor(t,e.colorInfo);n&&(this._styles.fillColor=this.colorValue(n),this._styles.fillOpacity=this.alphaValue(n))}return this._styles}});function E(t,e){return new I(t,e)}var P=e.Class.extend({options:{proportionalPolygon:!1,clickable:!0},initialize:function(t,n){this._rendererJson=t,this._pointSymbols=!1,this._symbols=[],this._visualVariables=this._parseVisualVariables(t.visualVariables),e.Util.setOptions(this,n)},_parseVisualVariables:function(t){var e={};if(t)for(var n=0;n<t.length;n++)e[t[n].type]=t[n];return e},_createDefaultSymbol:function(){this._rendererJson.defaultSymbol&&(this._defaultSymbol=this._newSymbol(this._rendererJson.defaultSymbol),this._defaultSymbol._isDefault=!0)},_newSymbol:function(t){return"esriSMS"===t.type||"esriPMS"===t.type?(this._pointSymbols=!0,C(t,this.options)):"esriSLS"===t.type?k(t,this.options):"esriSFS"===t.type?E(t,this.options):void 0},_getSymbol:function(){},attachStylesToLayer:function(t){this._pointSymbols?t.options.pointToLayer=e.Util.bind(this.pointToLayer,this):(t.options.style=e.Util.bind(this.style,this),t._originalStyle=t.options.style)},pointToLayer:function(t,n){var r=this._getSymbol(t);return r&&r.pointToLayer?r.pointToLayer(t,n,this._visualVariables,this.options):e.circleMarker(n,{radius:0,opacity:0})},style:function(t){var e;this.options.userDefinedStyle&&(e=this.options.userDefinedStyle(t));var n=this._getSymbol(t);return n?this.mergeStyles(n.style(t,this._visualVariables),e):this.mergeStyles({opacity:0,fillOpacity:0},e)},mergeStyles:function(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);if(e)for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}}),$=P.extend({initialize:function(t,e){P.prototype.initialize.call(this,t,e),this._field=this._rendererJson.field,this._rendererJson.normalizationType&&"esriNormalizeByField"===this._rendererJson.normalizationType&&(this._normalizationField=this._rendererJson.normalizationField),this._createSymbols()},_createSymbols:function(){var t,e=this._rendererJson.classBreakInfos;this._symbols=[];for(var n=e.length-1;n>=0;n--)t=this.options.proportionalPolygon&&this._rendererJson.backgroundFillSymbol?this._newSymbol(this._rendererJson.backgroundFillSymbol):this._newSymbol(e[n].symbol),t.val=e[n].classMaxValue,this._symbols.push(t);this._symbols.sort(function(t,e){return t.val>e.val?1:-1}),this._createDefaultSymbol(),this._maxValue=this._symbols[this._symbols.length-1].val},_getSymbol:function(t){var e=t.properties[this._field];if(this._normalizationField){var n=t.properties[this._normalizationField];if(isNaN(n)||0===n)return this._defaultSymbol;e/=n}if(e>this._maxValue)return this._defaultSymbol;for(var r=this._symbols[0],i=this._symbols.length-1;i>=0;i--){if(e>this._symbols[i].val)break;r=this._symbols[i]}return r}});function O(t,e){return new $(t,e)}var T=P.extend({initialize:function(t,e){P.prototype.initialize.call(this,t,e),this._field=this._rendererJson.field1,this._createSymbols()},_createSymbols:function(){for(var t,e=this._rendererJson.uniqueValueInfos,n=e.length-1;n>=0;n--)t=this._newSymbol(e[n].symbol),t.val=e[n].value,this._symbols.push(t);this._createDefaultSymbol()},_getSymbol:function(t){var e=t.properties[this._field];if(this._rendererJson.fieldDelimiter&&this._rendererJson.field2){var n=t.properties[this._rendererJson.field2];if(n){e+=this._rendererJson.fieldDelimiter+n;var r=t.properties[this._rendererJson.field3];r&&(e+=this._rendererJson.fieldDelimiter+r)}}for(var i=this._defaultSymbol,o=this._symbols.length-1;o>=0;o--)this._symbols[o].val==e&&(i=this._symbols[o]);return i}});function j(t,e){return new T(t,e)}var D=P.extend({initialize:function(t,e){P.prototype.initialize.call(this,t,e),this._createSymbol()},_createSymbol:function(){this._rendererJson.symbol&&this._symbols.push(this._newSymbol(this._rendererJson.symbol))},_getSymbol:function(){return this._symbols[0]}});function F(t,e){return new D(t,e)}function N(t,e){var n,r=t.drawingInfo.renderer,i={};switch(e.options.pane&&(i.pane=e.options.pane),t.drawingInfo.transparency&&(i.layerTransparency=t.drawingInfo.transparency),e.options.style&&(i.userDefinedStyle=e.options.style),r.type){case"classBreaks":if(A(t.geometryType,r,e),e._hasProportionalSymbols){e._createPointLayer();var o=O(r,i);o.attachStylesToLayer(e._pointLayer),i.proportionalPolygon=!0}n=O(r,i);break;case"uniqueValue":console.log(r,i),n=j(r,i);break;default:n=F(r,i)}n.attachStylesToLayer(e)}function A(t,e,n){if(n._hasProportionalSymbols=!1,"esriGeometryPolygon"===t&&(e.backgroundFillSymbol&&(n._hasProportionalSymbols=!0),e.classBreakInfos&&e.classBreakInfos.length)){var r=e.classBreakInfos[0].symbol;!r||"esriSMS"!==r.type&&"esriPMS"!==r.type||(n._hasProportionalSymbols=!0)}}var z=e.GeoJSON.extend({options:{data:{},opacity:1},initialize:function(t,n){var r,i;if(e.setOptions(this,n),this.data=this.options.data,this.opacity=this.options.opacity,this.popupInfo=null,this.labelingInfo=null,this._layers={},t)for(r=0,i=t.length;r<i;r++)this.addLayer(t[r]);"string"===typeof this.data?this._getFeatureCollection(this.data):this._parseFeatureCollection(this.data)},_getFeatureCollection:function(t){var n="https://www.arcgis.com/sharing/rest/content/items/"+t+"/data";e.esri.request(n,{},function(t,e){t?console.log(t):this._parseFeatureCollection(e)},this)},_parseFeatureCollection:function(t){var e,n,r=0;for(e=0,n=t.layers.length;e<n;e++)t.layers[e].featureSet.features.length>0&&(r=e);var i=t.layers[r].featureSet.features,o=t.layers[r].layerDefinition.geometryType,a=t.layers[r].layerDefinition.objectIdField,s=t.layers[r].layerDefinition||null;4326!==t.layers[r].layerDefinition.extent.spatialReference.wkid&&(102100!==t.layers[r].layerDefinition.extent.spatialReference.wkid&&console.error("[L.esri.WebMap] this wkid ("+t.layers[r].layerDefinition.extent.spatialReference.wkid+") is not supported."),i=this._projTo4326(i,o)),void 0!==t.layers[r].popupInfo&&(this.popupInfo=t.layers[r].popupInfo),void 0!==t.layers[r].layerDefinition.drawingInfo.labelingInfo&&(this.labelingInfo=t.layers[r].layerDefinition.drawingInfo.labelingInfo),console.log(t);var l=this._featureCollectionToGeoJSON(i,a);null!==s&&N(s,this),console.log(l),this.addData(l)},_projTo4326:function(t,n){var r,i;console.log("_project!");var o=[];for(r=0,i=t.length;r<i;r++){var a,s,l,u=t[r];if("esriGeometryPoint"===n)a=e.Projection.SphericalMercator.unproject(e.point(u.geometry.x,u.geometry.y)),u.geometry.x=a.lng,u.geometry.y=a.lat;else if("esriGeometryMultipoint"===n){var c;for(s=0,c=u.geometry.points.length;s<c;s++)a=e.Projection.SphericalMercator.unproject(e.point(u.geometry.points[s][0],u.geometry.points[s][1])),u.geometry.points[s][0]=a.lng,u.geometry.points[s][1]=a.lat}else if("esriGeometryPolyline"===n){var f,p;for(s=0,p=u.geometry.paths.length;s<p;s++)for(l=0,f=u.geometry.paths[s].length;l<f;l++)a=e.Projection.SphericalMercator.unproject(e.point(u.geometry.paths[s][l][0],u.geometry.paths[s][l][1])),u.geometry.paths[s][l][0]=a.lng,u.geometry.paths[s][l][1]=a.lat}else if("esriGeometryPolygon"===n){var h,d;for(s=0,d=u.geometry.rings.length;s<d;s++)for(l=0,h=u.geometry.rings[s].length;l<h;l++)a=e.Projection.SphericalMercator.unproject(e.point(u.geometry.rings[s][l][0],u.geometry.rings[s][l][1])),u.geometry.rings[s][l][0]=a.lng,u.geometry.rings[s][l][1]=a.lat}o.push(u)}return o},_featureCollectionToGeoJSON:function(t,e){var n,r,i={type:"FeatureCollection",features:[]},o=[];for(n=0,r=t.length;n<r;n++){var a=h(t[n],e);o.push(a)}return i.features=o,i}});function B(t,e){return new z(t,e)}var G=e.GeoJSON.extend({options:{url:"",data:{},opacity:1},initialize:function(t,n){var r,i;if(e.setOptions(this,n),this.url=this.options.url,this.layerDefinition=this.options.layerDefinition,this.locationInfo=this.options.locationInfo,this.opacity=this.options.opacity,this._layers={},t)for(r=0,i=t.length;r<i;r++)this.addLayer(t[r]);this._parseCSV(this.url,this.layerDefinition,this.locationInfo)},_parseCSV:function(t,e,r){n.csv(t,{latfield:r.latitudeFieldName,lonfield:r.longitudeFieldName},this),N(e,this)}});function R(t,e){return new G(t,e)}var J=e.GeoJSON.extend({options:{opacity:1,url:""},initialize:function(t,n){var r,i;if(e.setOptions(this,n),this.url=this.options.url,this.opacity=this.options.opacity,this.popupInfo=null,this.labelingInfo=null,this._layers={},t)for(r=0,i=t.length;r<i;r++)this.addLayer(t[r]);this._getKML(this.url)},_getKML:function(t){var n="http://utility.arcgis.com/sharing/kml?url="+t+'&model=simple&folders=&outSR=%7B"wkid"%3A4326%7D';e.esri.request(n,{},function(t,e){t?console.log(t):(console.log(e),this._parseFeatureCollection(e.featureCollection))},this)},_parseFeatureCollection:function(t){var e;for(console.log("_parseFeatureCollection"),e=0;e<3;e++)if(t.layers[e].featureSet.features.length>0){console.log(e);var n=t.layers[e].featureSet.features,r=t.layers[e].layerDefinition.objectIdField,i=this._featureCollectionToGeoJSON(n,r);void 0!==t.layers[e].popupInfo&&(this.popupInfo=t.layers[e].popupInfo),void 0!==t.layers[e].layerDefinition.drawingInfo.labelingInfo&&(this.labelingInfo=t.layers[e].layerDefinition.drawingInfo.labelingInfo),N(t.layers[e].layerDefinition,this),console.log(i),this.addData(i)}},_featureCollectionToGeoJSON:function(t,e){var n,r,i={type:"FeatureCollection",features:[]},o=[];for(n=0,r=t.length;n<r;n++){var a=h(t[n],e);o.push(a)}return i.features=o,i}});function V(t,e){return new J(t,e)}var W=e.DivIcon.extend({options:{iconSize:null,className:"esri-leaflet-webmap-labels",text:""},createIcon:function(t){var n=t&&"DIV"===t.tagName?t:document.createElement("div"),r=this.options;if(n.innerHTML='<div style="position: relative; left: -50%; text-shadow: 1px 1px 0px #fff, -1px 1px 0px #fff, 1px -1px 0px #fff, -1px -1px 0px #fff;">'+r.text+"</div>",n.style.fontSize="1em",n.style.fontWeight="bold",n.style.textTransform="uppercase",n.style.textAlign="center",n.style.whiteSpace="nowrap",r.bgPos){var i=e.point(r.bgPos);n.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(n,"icon"),n}});function U(t){return new W(t)}var q=e.Marker.extend({options:{properties:{},labelingInfo:{},offset:[0,0]},initialize:function(t,n){e.setOptions(this,n),this._latlng=e.latLng(t);var r=this._createLabelText(this.options.properties,this.options.labelingInfo);this._setLabelIcon(r,this.options.offset)},_createLabelText:function(t,e){var n=/\[([^\]]*)\]/g,r=e[0].labelExpression;return r=r.replace(n,function(e){var r=n.exec(e);return t[r[1]]}),r},_setLabelIcon:function(t,e){var n=U({text:t,iconAnchor:e});this.setIcon(n)}});function H(t,e){return new q(t,e)}function X(t){var e={position:[],offset:[]};return e.position=t.reverse(),e.offset=[20,20],e}function Y(t){var e,n={position:[],offset:[]};return e=Math.round(t.length/2),n.position=t[e].reverse(),n.offset=[0,0],n}function Z(t,e){var n={position:[],offset:[]};return n.position=t.getBounds().getCenter(),n.offset=[0,0],n}function K(t){var e=(""+t).replace(/\D/g,""),n=e.match(/^(\d{3})(\d{3})(\d{4})$/);return n?"("+n[1]+") "+n[2]+"-"+n[3]:null}function Q(t){return moment(t).format("MM/DD/YYYY")}function tt(t,e){var n=/\{([^\]]*)\}/g,r="",i="";void 0!==t.title&&(r=t.title),r=r.replace(n,function(t){var r=n.exec(t);return e[r[1]]}),i='<div class="leaflet-popup-content-title text-center"><h4>'+r+'</h4></div><div class="leaflet-popup-content-description" style="max-height:200px;overflow:auto;">';var o='<div style="font-weight:bold;color:#999;margin-top:5px;word-break:break-all;">',a='</div><p style="margin-top:0;margin-bottom:5px;word-break:break-all;">',s='<a target="_blank" href="',l='<a href="mailto:';if(void 0!==t.fieldInfos){for(var u=0;u<t.fieldInfos.length;u++)!0===t.fieldInfos[u].visible&&(null===e[t.fieldInfos[u].fieldName]?i+=o+t.fieldInfos[u].label+a+"none</p>":"URL"===t.fieldInfos[u].fieldName||"CODE_SEC_1"===t.fieldInfos[u].fieldName||"WEBSITE"===t.fieldInfos[u].fieldName||"FINAL_LINK_COPY"===t.fieldInfos[u].fieldName||"LINK"===t.fieldInfos[u].fieldName||"CODE_SECTION_LINK"===t.fieldInfos[u].fieldName?i+=o+t.fieldInfos[u].label+a+s+e[t.fieldInfos[u].fieldName]+'">'+e[t.fieldInfos[u].fieldName]+"</a></p>":t.fieldInfos[u].fieldName.includes("EMAIL")?i+=o+t.fieldInfos[u].label+a+l+e[t.fieldInfos[u].fieldName]+'">'+e[t.fieldInfos[u].fieldName]+"</a></p>":t.fieldInfos[u].fieldName.includes("PHONE")?i+=o+t.fieldInfos[u].label+a+K(e[t.fieldInfos[u].fieldName])+"</p>":t.fieldInfos[u].fieldName.includes("DATE")?i+=o+t.fieldInfos[u].label+a+Q(e[t.fieldInfos[u].fieldName])+"</p>":i+=o+t.fieldInfos[u].label+a+e[t.fieldInfos[u].fieldName]+"</p>");i+="</div>"}else if(void 0!==t.description){var c=t.description.replace(n,function(t){var r=n.exec(t);return e[r[1]]});i+=c+"</div>"}return i}function et(t,e,n,r,i){return nt(t,e,n,r,i)}function nt(t,n,r,i,o){var a,s,l,u,c=[],f=o+"-label";if("Feature Collection"===t.type||void 0!==t.featureCollection){var p,h;if(r.createPane(f),void 0===t.itemId)for(l=0,u=t.featureCollection.layers.length;l<u;l++)t.featureCollection.layers[l].featureSet.features.length>0&&(void 0!==t.featureCollection.layers[l].popupInfo&&null!==t.featureCollection.layers[l].popupInfo&&(p=t.featureCollection.layers[l].popupInfo),void 0!==t.featureCollection.layers[l].layerDefinition.drawingInfo.labelingInfo&&null!==t.featureCollection.layers[l].layerDefinition.drawingInfo.labelingInfo&&(h=t.featureCollection.layers[l].layerDefinition.drawingInfo.labelingInfo));s=e.featureGroup(c);var d=B(null,{data:t.itemId||t.featureCollection,opacity:t.opacity,pane:o,onEachFeature:function(e,n){if(n.feature.layerName=t.title.split("_")[1],void 0!==d&&(p=d.popupInfo,h=d.labelingInfo),void 0!==p&&null!==p){var r=tt(p,e.properties);n.feature.popupHtml=r}if(void 0!==h&&null!==h){var i,o=n.feature.geometry.coordinates;i="Point"===n.feature.geometry.type?X(o):"LineString"===n.feature.geometry.type?Y(o):"MultiLineString"===n.feature.geometry.type?Y(o[Math.round(o.length/2)]):Z(n);var a=H(i.position,{zIndexOffset:1,properties:e.properties,labelingInfo:h,offset:i.offset,pane:f});s.addLayer(a)}}});return a=e.layerGroup([d,s]),n.push({type:"FC",title:t.title||"",layer:a}),a}if("ArcGISFeatureLayer"===t.layerType&&void 0!==t.layerDefinition){var m="1=1";if(void 0!==t.layerDefinition.drawingInfo){if("heatmap"===t.layerDefinition.drawingInfo.renderer.type){var y={};return t.layerDefinition.drawingInfo.renderer.colorStops.map(function(t){y[(Math.round(100*t.ratio)/100+6)/7]="rgb("+t.color[0]+","+t.color[1]+","+t.color[2]+")"}),a=e.esri.Heat.heatmapFeatureLayer({url:t.url,token:i.token||null,minOpacity:.5,max:t.layerDefinition.drawingInfo.renderer.maxPixelIntensity,blur:t.layerDefinition.drawingInfo.renderer.blurRadius,radius:1.3*t.layerDefinition.drawingInfo.renderer.blurRadius,gradient:y,pane:o}),n.push({type:"HL",title:t.title||"",layer:a}),a}var g=t.layerDefinition.drawingInfo;return g.transparency=100-100*t.opacity,void 0!==t.layerDefinition.definitionExpression&&(m=t.layerDefinition.definitionExpression),r.createPane(f),s=e.featureGroup(c),a=e.esri.featureLayer({url:t.url,where:m,token:i.token||null,drawingInfo:g,pane:o,onEachFeature:function(e,n){if(n.feature.layerName=t.title.split("_")[1],void 0!==t.popupInfo){var r=tt(t.popupInfo,e.properties);n.feature.popupHtml=r}if(void 0!==t.layerDefinition.drawingInfo.labelingInfo&&null!==t.layerDefinition.drawingInfo.labelingInfo){var i,o=t.layerDefinition.drawingInfo.labelingInfo,a=n.feature.geometry.coordinates;i="Point"===n.feature.geometry.type?X(a):"LineString"===n.feature.geometry.type?Y(a):"MultiLineString"===n.feature.geometry.type?Y(a[Math.round(a.length/2)]):Z(n);var l=H(i.position,{zIndexOffset:1,properties:e.properties,labelingInfo:o,offset:i.offset,pane:f});s.addLayer(l)}}}),a=e.layerGroup([a,s]),n.push({type:"FL",title:t.title||"",layer:a}),a}return void 0!==t.layerDefinition.definitionExpression&&(m=t.layerDefinition.definitionExpression),a=e.esri.featureLayer({url:t.url,token:i.token||null,where:m,pane:o,onEachFeature:function(e,n){if(n.feature.layerName=t.title.split("_")[1],void 0!==t.popupInfo){var r=tt(t.popupInfo,e.properties);n.feature.popupHtml=r}}}),n.push({type:"FL",title:t.title||"",layer:a}),a}if("ArcGISFeatureLayer"===t.layerType)return a=e.esri.featureLayer({url:t.url,token:i.token||null,pane:o,onEachFeature:function(e,n){if(n.feature.layerName=t.title.split("_")[1],void 0!==t.popupInfo){var r=tt(t.popupInfo,e.properties);n.feature.popupHtml=r}}}),n.push({type:"FL",title:t.title||"",layer:a}),a;if("CSV"===t.layerType)return s=e.featureGroup(c),a=R(null,{url:t.url,layerDefinition:t.layerDefinition,locationInfo:t.locationInfo,opacity:t.opacity,pane:o,onEachFeature:function(e,n){if(n.feature.layerName=t.title.split("_")[1],void 0!==t.popupInfo){var r=tt(t.popupInfo,e.properties);n.feature.popupHtml=r}if(void 0!==t.layerDefinition.drawingInfo.labelingInfo&&null!==t.layerDefinition.drawingInfo.labelingInfo){var i,o=t.layerDefinition.drawingInfo.labelingInfo,a=n.feature.geometry.coordinates;i="Point"===n.feature.geometry.type?X(a):"LineString"===n.feature.geometry.type?Y(a):"MultiLineString"===n.feature.geometry.type?Y(a[Math.round(a.length/2)]):Z(n);var l=H(i.position,{zIndexOffset:1,properties:e.properties,labelingInfo:o,offset:i.offset,pane:f});s.addLayer(l)}}}),a=e.layerGroup([a,s]),n.push({type:"CSV",title:t.title||"",layer:a}),a;if("KML"===t.layerType){s=e.featureGroup(c);var v=V(null,{url:t.url,opacity:t.opacity,pane:o,onEachFeature:function(e,n){if(n.feature.layerName=t.title.split("_")[1],void 0!==v.popupInfo&&null!==v.popupInfo){var r=tt(v.popupInfo,e.properties);n.feature.popupHtml=r}if(void 0!==v.labelingInfo&&null!==v.labelingInfo){var i,o=v.labelingInfo,a=n.feature.geometry.coordinates;i="Point"===n.feature.geometry.type?X(a):"LineString"===n.feature.geometry.type?Y(a):"MultiLineString"===n.feature.geometry.type?Y(a[Math.round(a.length/2)]):Z(n);var l=H(i.position,{zIndexOffset:1,properties:e.properties,labelingInfo:o,offset:i.offset,pane:f});s.addLayer(l)}}});return a=e.layerGroup([v,s]),n.push({type:"KML",title:t.title||"",layer:a}),a}if("ArcGISImageServiceLayer"===t.layerType)return a=e.esri.imageMapLayer({url:t.url,token:i.token||null,pane:o,opacity:t.opacity||1}),n.push({type:"IML",title:t.title||"",layer:a}),a;if("ArcGISMapServiceLayer"===t.layerType)return a=e.esri.dynamicMapLayer({url:t.url,token:i.token||null,pane:o,opacity:t.opacity||1}),n.push({type:"DML",title:t.title||"",layer:a}),a;if("ArcGISTiledMapServiceLayer"===t.layerType){try{a=e.esri.basemapLayer(t.title)}catch(x){a=e.esri.tiledMapLayer({url:t.url,token:i.token||null}),e.esri.request(t.url,{},function(t,e){if(t)console.log(t);else{var n=r.getSize().x-55,i='<span class="esri-attributions" style="line-height:14px; vertical-align: -3px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; display:inline-block; max-width:'+n+'px;">'+e.copyrightText+"</span>";r.attributionControl.addAttribution(i)}})}return document.getElementsByClassName("leaflet-tile-pane")[0].style.opacity=t.opacity||1,n.push({type:"TML",title:t.title||"",layer:a}),a}if("VectorTileLayer"===t.layerType){var b={"World Street Map (with Relief)":"StreetsRelief","World Street Map (with Relief) (Mature Support)":"StreetsRelief","Hybrid Reference Layer":"Hybrid","Hybrid Reference Layer (Mature Support)":"Hybrid","World Street Map":"Streets","World Street Map (Mature Support)":"Streets","World Street Map (Night)":"StreetsNight","World Street Map (Night) (Mature Support)":"StreetsNight","Dark Gray Canvas":"DarkGray","Dark Gray Canvas (Mature Support)":"DarkGray","World Topographic Map":"Topographic","World Topographic Map (Mature Support)":"Topographic","World Navigation Map":"Navigation","World Navigation Map (Mature Support)":"Navigation","Light Gray Canvas":"Gray","Light Gray Canvas (Mature Support)":"Gray"};return b[t.title]?a=e.esri.Vector.basemap(b[t.title]):(console.error("Unsupported Vector Tile Layer: ",t),a=e.featureGroup([])),n.push({type:"VTL",title:t.title||t.id||"",layer:a}),a}if("OpenStreetMap"===t.layerType)return a=e.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),n.push({type:"TL",title:t.title||t.id||"",layer:a}),a;if("WebTiledLayer"===t.layerType){var _=rt(t.templateUrl);return a=e.tileLayer(_,{attribution:t.copyright}),document.getElementsByClassName("leaflet-tile-pane")[0].style.opacity=t.opacity||1,n.push({type:"TL",title:t.title||t.id||"",layer:a}),a}if("WMS"===t.layerType){var S="";for(l=0,u=t.visibleLayers.length;l<u;l++)S+=t.visibleLayers[l],l<u-1&&(S+=",");return a=e.tileLayer.wms(t.url,{layers:String(S),format:"image/png",transparent:!0,attribution:t.copyright}),n.push({type:"WMS",title:t.title||t.id||"",layer:a}),a}return a=e.featureGroup([]),console.log("Unsupported Layer: ",t),a}function rt(t){var e=t;return e=e.replace(/\{level}/g,"{z}"),e=e.replace(/\{col}/g,"{x}"),e=e.replace(/\{row}/g,"{y}"),e}var it=e.Evented.extend({options:{map:{},token:null,server:"www.arcgis.com"},initialize:function(t,n){e.setOptions(this,n),this._map=this.options.map,this._token=this.options.token,this._server=this.options.server,this._webmapId=t,this._loaded=!1,this._metadataLoaded=!1,this._loadedLayersNum=0,this._layersNum=0,this.layers=[],this.title="",this.bookmarks=[],this.portalItem={},this.VERSION=r,this._loadWebMapMetaData(t),this._loadWebMap(t)},_checkLoaded:function(){this._loadedLayersNum++,this._loadedLayersNum===this._layersNum&&(this._loaded=!0,this.fire("load"))},_operationalLayer:function(t,e,n,r,i){var o=et(t,e,n,r,i);void 0!==o&&!0===t.visibility&&o.addTo(n)},_loadWebMapMetaData:function(t){var n={},r=this._map,i=this,o="https://"+this._server+"/sharing/rest/content/items/"+t;this._token&&this._token.length>0&&(n.token=this._token),e.esri.request(o,n,function(t,e){t?console.log(t):(i.portalItem=e,i.title=e.title,i._metadataLoaded=!0,i.fire("metadataLoad"),r.fitBounds([e.extent[0].reverse(),e.extent[1].reverse()]))})},_loadWebMap:function(t){var n=this._map,r=this.layers,i=this._server,o={},a="https://"+i+"/sharing/rest/content/items/"+t+"/data";this._token&&this._token.length>0&&(o.token=this._token),e.esri.request(a,o,function(t,a){t?console.log("L.esri.request error:",t):(this._layersNum=a.baseMap.baseMapLayers.length+a.operationalLayers.length,a.baseMap.baseMapLayers.map(function(a){if(void 0!==a.itemId){var s="https://"+i+"/sharing/rest/content/items/"+a.itemId;e.esri.request(s,o,function(e,i){e?console.error(t):(console.log(i.access),"public"!==i.access?this._operationalLayer(a,r,n,o):this._operationalLayer(a,r,n,{})),this._checkLoaded()},this)}else this._operationalLayer(a,r,n,{}),this._checkLoaded()}.bind(this)),a.operationalLayers.map(function(a,s){var l="esri-webmap-layer"+s;if(n.createPane(l),void 0!==a.itemId){var u="https://"+i+"/sharing/rest/content/items/"+a.itemId;e.esri.request(u,o,function(e,i){e?console.error(t):(console.log(i.access),"public"!==i.access?this._operationalLayer(a,r,n,o,l):this._operationalLayer(a,r,n,{},l)),this._checkLoaded()},this)}else this._operationalLayer(a,r,n,{},l),this._checkLoaded()}.bind(this)),void 0!==a.bookmarks&&a.bookmarks.length>0&&a.bookmarks.map(function(t){var n=e.Projection.SphericalMercator.unproject(e.point(t.extent.xmax,t.extent.ymax)),r=e.Projection.SphericalMercator.unproject(e.point(t.extent.xmin,t.extent.ymin)),i=e.latLngBounds(r,n);this.bookmarks.push({name:t.name,bounds:i})}.bind(this)))}.bind(this))}});function ot(t,e){return new it(t,e)}t.WebMap=it,t.webMap=ot,t.operationalLayer=et,t.FeatureCollection=z,t.featureCollection=B,t.LabelMarker=q,t.labelMarker=H,t.LabelIcon=W,t.labelIcon=U,t.createPopupContent=tt,Object.defineProperty(t,"__esModule",{value:!0})})},3729:function(t,e,n){var r=n("9e69"),i=n("00fd"),o=n("29f3"),a="[object Null]",s="[object Undefined]",l=r?r.toStringTag:void 0;function u(t){return null==t?void 0===t?s:a:l&&l in Object(t)?i(t):o(t)}t.exports=u},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"386e":function(t,e,n){"use strict";var r=n("39d7"),i=n.n(r);i.a},"39d7":function(t,e,n){},"3b4a":function(t,e,n){var r=n("0b07"),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},"3eda":function(t,e,n){var r=n("3729"),i=n("1310"),o=n("60ed"),a="[object DOMException]",s="[object Error]";function l(t){if(!i(t))return!1;var e=r(t);return e==s||e==a||"string"==typeof t.message&&"string"==typeof t.name&&!o(t)}t.exports=l},"41c3":function(t,e,n){var r=n("1a8c"),i=n("eac5"),o=n("ec8c"),a=Object.prototype,s=a.hasOwnProperty;function l(t){if(!r(t))return o(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}t.exports=l},"41ef":function(t,e,n){},4517:function(t,e,n){var r=n("a22a");t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},"4aa6":function(t,e,n){t.exports=n("dc62")},"4b41":function(t,e){function n(t,e){return a(t,e).val}function r(t){return i(t.lat,"lat")+" "+i(t.lon,"lon")}function i(t,e){var n=o(t,e);return n.whole+" "+(n.minutes?n.minutes+"' ":"")+(n.seconds?n.seconds+'" ':"")+n.dir}function o(t,e){var n={lat:["N","S"],lon:["E","W"]}[e]||"",r=n[t>=0?0:1],i=Math.abs(t),o=Math.floor(i),a=i-o,s=60*a,l=Math.floor(s),u=Math.floor(60*(s-l));return{whole:o,minutes:l,seconds:u,dir:r}}function a(t,e,n){if(e||(e="NSEW"),"string"!==typeof t)return{val:null,regex:n};n=n||/[\s\,]*([\-|\|\]?[0-9.]+)? *(?:([0-9.]+)['] *)?(?:([0-9.]+)(?:''|"||) *)?([NSEW])?/gi;var r=n.exec(t);return r?r[4]&&-1===e.indexOf(r[4])?{val:null,regex:n}:{val:((r[1]?parseFloat(r[1]):0)+(r[2]?parseFloat(r[2])/60:0)+(r[3]?parseFloat(r[3])/3600:0))*(r[4]&&"S"===r[4]||"W"===r[4]?-1:1),regex:n,raw:r[0],dim:r[4]}:{val:null,regex:n}}function s(t,e){t=t.trim();var n=a(t,e);if(null===n.val)return null;var r=a(t,e,n.regex);return null===r.val?null:n.raw+r.raw!==t?null:n.dim?l(n.val,r.val,n.dim):[n.val,r.val]}function l(t,e,n){return"N"===n||"S"===n?[t,e]:"W"===n||"E"===n?[e,t]:void 0}t.exports=n,t.exports.pair=s,t.exports.format=i,t.exports.formatPair=r,t.exports.coordToDMS=o},"4c95":function(t,e,n){"use strict";var r=n("e53d"),i=n("584a"),o=n("d9f6"),a=n("8e60"),s=n("5168")("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},"4d16":function(t,e,n){t.exports=n("25b0")},"4def":function(t,e,n){var r=n("fe40"),i=n("76dd"),o=/[&<>"']/g,a=RegExp(o.source);function s(t){return t=i(t),t&&a.test(t)?t.replace(o,r):t}t.exports=s},"4e2b":function(t,e,n){"use strict";var r=n("4aa6"),i=n.n(r),o=n("4d16"),a=n.n(o);function s(t,e){return s=a.a||function(t,e){return t.__proto__=e,t},s(t,e)}function l(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=i()(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}n.d(e,"a",function(){return l})},"4ee1":function(t,e,n){var r=n("5168")("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},t(o)}catch(a){}return n}},"50d8":function(t,e){function n(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}t.exports=n},5147:function(t,e,n){var r=n("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(i){}}return!0}},5226:function(t,e){var n={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function r(t){return"\\"+n[t]}t.exports=r},5385:function(t,e,n){},"549b":function(t,e,n){"use strict";var r=n("d864"),i=n("63b6"),o=n("241e"),a=n("b0dc"),s=n("3702"),l=n("b447"),u=n("20fd"),c=n("7cd6");i(i.S+i.F*!n("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,f,p=o(t),h="function"==typeof this?this:Array,d=arguments.length,m=d>1?arguments[1]:void 0,y=void 0!==m,g=0,v=c(p);if(y&&(m=r(m,d>2?arguments[2]:void 0,2)),void 0==v||h==Array&&s(v))for(e=l(p.length),n=new h(e);e>g;g++)u(n,g,y?m(p[g],g):p[g]);else for(f=v.call(p),n=new h;!(i=f.next()).done;g++)u(n,g,y?a(f,m,[i.value,g],!0):i.value);return n.length=g,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},"54c6":function(t,e){var n=/<%([\s\S]+?)%>/g;t.exports=n},"55dd":function(t,e,n){"use strict";var r=n("5ca1"),i=n("d8e8"),o=n("4bf8"),a=n("79e5"),s=[].sort,l=[1,2,3];r(r.P+r.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},"57a5":function(t,e,n){var r=n("91e9"),i=r(Object.keys,Object);t.exports=i},"57b1":function(t,e,n){var r=n("d864"),i=n("335c"),o=n("241e"),a=n("b447"),s=n("bfac");t.exports=function(t,e){var n=1==t,l=2==t,u=3==t,c=4==t,f=6==t,p=5==t||f,h=e||s;return function(e,s,d){for(var m,y,g=o(e),v=i(g),b=r(s,d,3),_=a(v.length),S=0,x=n?h(e,_):l?h(e,0):void 0;_>S;S++)if((p||S in v)&&(m=v[S],y=b(m,S,g),t))if(n)x[S]=y;else if(y)switch(t){case 3:return!0;case 5:return m;case 6:return S;case 2:x.push(m)}else if(c)return!1;return f?-1:u||c?c:x}}},"57e3":function(t,e,n){n("68f7")("Set")},"585a":function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("c8ba"))},"59ad":function(t,e,n){t.exports=n("7be7")},"5aee":function(t,e,n){"use strict";var r=n("d9f6").f,i=n("a159"),o=n("5c95"),a=n("d864"),s=n("1173"),l=n("a22a"),u=n("30f1"),c=n("50ed"),f=n("4c95"),p=n("8e60"),h=n("ebfd").fastKey,d=n("9f79"),m=p?"_s":"size",y=function(t,e){var n,r=h(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var c=t(function(t,r){s(t,c,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=r&&l(r,n,t[u],t)});return o(c.prototype,{clear:function(){for(var t=d(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var n=d(this,e),r=y(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(t){d(this,e);var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){r(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(t){return!!y(d(this,e),t)}}),p&&r(c.prototype,"size",{get:function(){return d(this,e)[m]}}),c},def:function(t,e,n){var r,i,o=y(t,e);return o?o.v=n:(t._l=o={i:i=h(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[m]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,e,n){u(t,e,function(t,n){this._t=d(t,e),this._k=n,this._l=void 0},function(){var t=this,e=t._k,n=t._l;while(n&&n.r)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?c(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,c(1))},n?"entries":"values",!n,!0),f(e)}}},"5c95":function(t,e,n){var r=n("35e8");t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},"5ea3":function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e["a"]=n}).call(this,n("c8ba"))},"60ed":function(t,e,n){var r=n("3729"),i=n("2dcb"),o=n("1310"),a="[object Object]",s=Function.prototype,l=Object.prototype,u=s.toString,c=l.hasOwnProperty,f=u.call(Object);function p(t){if(!o(t)||r(t)!=a)return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==f}t.exports=p},"66a9":function(t,e,n){var r=n("4def"),i=n("c276"),o=n("54c6"),a=n("eff0"),s={escape:i,evaluate:o,interpolate:a,variable:"",imports:{_:{escape:r}}};t.exports=s},6747:function(t,e){var n=Array.isArray;t.exports=n},6762:function(t,e,n){"use strict";var r=n("5ca1"),i=n("c366")(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},"68f7":function(t,e,n){"use strict";var r=n("63b6"),i=n("79aa"),o=n("d864"),a=n("a22a");t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,l=arguments[1];return i(this),e=void 0!==l,e&&i(l),void 0==t?new this:(n=[],e?(r=0,s=o(l,arguments[2],2),a(t,!1,function(t){n.push(s(t,r++))})):a(t,!1,n.push,n),new this(n))}})}},"6b54":function(t,e,n){"use strict";n("3846");var r=n("cb7c"),i=n("0bfb"),o=n("9e1e"),a="toString",s=/./[a],l=function(t){n("2aba")(RegExp.prototype,a,t,!0)};n("79e5")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?l(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):s.name!=a&&l(function(){return s.call(this)})},"6bb5":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("061b"),i=n.n(r),o=n("4d16"),a=n.n(o);function s(t){return s=a.a?i.a:function(t){return t.__proto__||i()(t)},s(t)}},"6fcd":function(t,e,n){var r=n("50d8"),i=n("d370"),o=n("6747"),a=n("0d24"),s=n("c098"),l=n("73ac"),u=Object.prototype,c=u.hasOwnProperty;function f(t,e){var n=o(t),u=!n&&i(t),f=!n&&!u&&a(t),p=!n&&!u&&!f&&l(t),h=n||u||f||p,d=h?r(t.length,String):[],m=d.length;for(var y in t)!e&&!c.call(t,y)||h&&("length"==y||f&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,m))||d.push(y);return d}t.exports=f},7075:function(t,e,n){"use strict";var r=n("63b6");t.exports=function(t){r(r.S,t,{of:function(){var t=arguments.length,e=new Array(t);while(t--)e[t]=arguments[t];return new this(e)}})}},7126:function(t,e,n){"use strict";var r={};function i(t,e){t=Math.round(t*e),t<<=1,t<0&&(t=~t);var n="";while(t>=32)n+=String.fromCharCode(63+(32|31&t)),t>>=5;return n+=String.fromCharCode(t+63),n}function o(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice().reverse());return e}r.decode=function(t,e){var n,r,i=0,o=0,a=0,s=[],l=0,u=0,c=null,f=Math.pow(10,e||5);while(i<t.length){c=null,l=0,u=0;do{c=t.charCodeAt(i++)-63,u|=(31&c)<<l,l+=5}while(c>=32);n=1&u?~(u>>1):u>>1,l=u=0;do{c=t.charCodeAt(i++)-63,u|=(31&c)<<l,l+=5}while(c>=32);r=1&u?~(u>>1):u>>1,o+=n,a+=r,s.push([o/f,a/f])}return s},r.encode=function(t,e){if(!t.length)return"";for(var n=Math.pow(10,e||5),r=i(t[0][0],n)+i(t[0][1],n),o=1;o<t.length;o++){var a=t[o],s=t[o-1];r+=i(a[0]-s[0],n),r+=i(a[1]-s[1],n)}return r},r.fromGeoJSON=function(t,e){if(t&&"Feature"===t.type&&(t=t.geometry),!t||"LineString"!==t.type)throw new Error("Input must be a GeoJSON LineString");return r.encode(o(t.coordinates),e)},r.toGeoJSON=function(t,e){var n=r.decode(t,e);return{type:"LineString",coordinates:o(n)}},t.exports&&(t.exports=r)},"72f0":function(t,e){function n(t){return function(){return t}}t.exports=n},"73a4":function(t,e,n){var r=n("f7726"),i=n("36ec"),o=n("324a"),a=n("7126"),s=n("88c2"),l=n("ab09");function u(t,e){"setGeoJSON"in t?t.setGeoJSON(e):"addData"in t&&t.addData(e)}function c(t,e,n){var i=n||L.geoJson();return r(t,function(t,e){if(t)return i.fire("error",{error:t});u(i,JSON.parse(e.responseText)),i.fire("ready")}),i}function f(t,e,n){var i=n||L.geoJson();function o(t,n){if(t)return i.fire("error",{error:t});g(n.responseText,e,i),i.fire("ready")}return r(t,o),i}function p(t,e,n){var i=n||L.geoJson();function o(t,n){var r;if(t)return i.fire("error",{error:t});function o(){r=!0}i.on("error",o),v(n.responseText,e,i),i.off("error",o),r||i.fire("ready")}return r(t,o),i}function h(t,e,n){var i=n||L.geoJson();function o(t,n){var r;if(t)return i.fire("error",{error:t});function o(){r=!0}i.on("error",o),b(n.responseXML||n.responseText,e,i),i.off("error",o),r||i.fire("ready")}return r(t,o),i}function d(t,e,n){var i=n||L.geoJson();function o(t,n){var r;if(t)return i.fire("error",{error:t});function o(){r=!0}i.on("error",o),_(n.responseXML||n.responseText,e,i),i.off("error",o),r||i.fire("ready")}return r(t,o),i}function m(t,e,n){var i=n||L.geoJson();function o(t,n){if(t)return i.fire("error",{error:t});x(n.responseText,e,i),i.fire("ready")}return r(t,o),i}function y(t,e,n){var i=n||L.geoJson();function o(t,n){if(t)return i.fire("error",{error:t});S(n.responseText,e,i),i.fire("ready")}return r(t,o),i}function g(t,e,n){var r="string"===typeof t?JSON.parse(t):t;for(var i in n=n||L.geoJson(),r.objects){var o=s.feature(r,r.objects[i]);o.features?u(n,o.features):u(n,o)}return n}function v(t,e,n){function r(t,e){if(t)return n.fire("error",{error:t});u(n,e)}return n=n||L.geoJson(),e=e||{},i.csv2geojson(t,e,r),n}function b(t,e,n){var r=w(t);if(!r)return n.fire("error",{error:"Could not parse GPX"});n=n||L.geoJson();var i=l.gpx(r);return u(n,i),n}function _(t,e,n){var r=w(t);if(!r)return n.fire("error",{error:"Could not parse KML"});n=n||L.geoJson();var i=l.kml(r);return u(n,i),n}function S(t,e,n){n=n||L.geoJson(),e=e||{};for(var r=a.decode(t,e.precision),i={type:"LineString",coordinates:[]},o=0;o<r.length;o++)i.coordinates[o]=[r[o][1],r[o][0]];return u(n,i),n}function x(t,e,n){n=n||L.geoJson();var r=o(t);return u(n,r),n}function w(t){return"string"===typeof t?(new DOMParser).parseFromString(t,"text/xml"):t}t.exports.polyline=y,t.exports.polyline.parse=S,t.exports.geojson=c,t.exports.topojson=f,t.exports.topojson.parse=g,t.exports.csv=p,t.exports.csv.parse=v,t.exports.gpx=h,t.exports.gpx.parse=b,t.exports.kml=d,t.exports.kml.parse=_,t.exports.wkt=m,t.exports.wkt.parse=x},"73ac":function(t,e,n){var r=n("743f"),i=n("b047"),o=n("99d3"),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},"743f":function(t,e,n){var r=n("3729"),i=n("b218"),o=n("1310"),a="[object Arguments]",s="[object Array]",l="[object Boolean]",u="[object Date]",c="[object Error]",f="[object Function]",p="[object Map]",h="[object Number]",d="[object Object]",m="[object RegExp]",y="[object Set]",g="[object String]",v="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",S="[object Float32Array]",x="[object Float64Array]",w="[object Int8Array]",L="[object Int16Array]",C="[object Int32Array]",M="[object Uint8Array]",k="[object Uint8ClampedArray]",I="[object Uint16Array]",E="[object Uint32Array]",P={};function $(t){return o(t)&&i(t.length)&&!!P[r(t)]}P[S]=P[x]=P[w]=P[L]=P[C]=P[M]=P[k]=P[I]=P[E]=!0,P[a]=P[s]=P[b]=P[l]=P[_]=P[u]=P[c]=P[f]=P[p]=P[h]=P[d]=P[m]=P[y]=P[g]=P[v]=!1,t.exports=$},"74be":function(t,e,n){var r=n("63b6");r(r.P+r.R,"Set",{toJSON:n("f228")("Set")})},"76b3":function(t,e,n){"use strict";function r(t,e,n){const r=Object.keys(n).filter(t=>{return t.startsWith("l-")}).map(t=>t.slice(2));for(let i of r){const n="l-"+i;e.on(i,e=>{t.$emit(n,e)})}}e["a"]=r},"76dd":function(t,e,n){var r=n("ce86");function i(t){return null==t?"":r(t)}t.exports=i},"774e":function(t,e,n){t.exports=n("d2d5")},7760:function(t,e,n){"use strict";var r=n("afeb"),i=n.n(r);i.a},7948:function(t,e){function n(t,e){var n=-1,r=null==t?0:t.length,i=Array(r);while(++n<r)i[n]=e(t[n],n,t);return i}t.exports=n},"7be7":function(t,e,n){n("0a90"),t.exports=n("584a").parseFloat},"7d6d":function(t,e,n){var r=n("63b6"),i=n("13c8")(!1);r(r.S,"Object",{values:function(t){return i(t)}})},"7e02":function(t,e,n){"use strict";var r=n("00ba"),i=n.n(r);i.a},"83ae":function(t,e,n){},"84ae":function(t,e,n){!function(e,r){t.exports=r(n("e11e"),n("e747"),n("8919"),n("ef03"))}(0,function(t,e,n,r){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r;var i={acres:{factor:24711e-8,display:"acres",decimals:2},feet:{factor:3.2808,display:"feet",decimals:0},kilometers:{factor:.001,display:"kilometers",decimals:2},hectares:{factor:1e-4,display:"hectares",decimals:2},meters:{factor:1,display:"meters",decimals:0},miles:{factor:3.2808/5280,display:"miles",decimals:2},sqfeet:{factor:10.7639,display:"sqfeet",decimals:0},sqmeters:{factor:1,display:"sqmeters",decimals:0},sqmiles:{factor:3.86102e-7,display:"sqmiles",decimals:2}};function o(t){if(t)return t.setAttribute("style","display:none;"),t}function a(t){if(t)return t.removeAttribute("style"),t}function s(r){r[r.length-1];var i=r.map(function(t){return[t.lat,t.lng]}),o=new t.Polyline(i),a=new t.Polygon(i);return{length:1e3*e(o.toGeoJSON(),{units:"kilometers"}),area:n(a.toGeoJSON())}}var l={activeColor:"#ABE67E",completedColor:"#C8F2BE"},u=function(t){this._options=L.extend({},l,this._options,t)};u.prototype.getSymbol=function(t){return{measureDrag:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:.7,fillColor:this._options.activeColor,fillOpacity:.5,className:"layer-measuredrag"},measureArea:{clickable:!1,stroke:!1,fillColor:this._options.activeColor,fillOpacity:.2,className:"layer-measurearea"},measureBoundary:{clickable:!1,color:this._options.activeColor,weight:2,opacity:.9,fill:!1,className:"layer-measureboundary"},measureVertex:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:.7,className:"layer-measurevertex"},measureVertexActive:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:1,className:"layer-measurevertex active"},resultArea:{clickable:!0,color:this._options.completedColor,weight:2,opacity:.9,fillColor:this._options.completedColor,fillOpacity:.2,className:"layer-measure-resultarea"},resultLine:{clickable:!0,color:this._options.completedColor,weight:3,opacity:.9,fill:!1,className:"layer-measure-resultline"},resultPoint:{clickable:!0,radius:4,color:this._options.completedColor,weight:2,opacity:1,fillColor:this._options.completedColor,fillOpacity:.7,className:"layer-measure-resultpoint"}}[t]};var c=function(t,e){return e||(e=document),e.querySelector(t)};function f(t){return t.toLocaleString()}var p={imports:{numberFormat:f},interpolate:/{{([\s\S]+?)}}/g},h=r('<a class="{{ model.className }}-toggle js-toggle" href="#" title="Measure distances and areas">Measure</a>\r\n<div class="{{ model.className }}-interaction js-interaction">\r\n  <div class="js-startprompt startprompt">\r\n    <h3>Measure distances and areas</h3>\r\n    <ul class="tasks">\r\n      <a href="#" class="js-start start">Create a new measurement</a>\r\n    </ul>\r\n  </div>\r\n  <div class="js-measuringprompt">\r\n    <h3>Measure distances and areas</h3>\r\n    <p class="js-starthelp">Start creating a measurement by adding points to the map</p>\r\n    <div class="js-results results"></div>\r\n    <ul class="js-measuretasks tasks">\r\n      <li><a href="#" class="js-cancel cancel">Cancel</a></li>\r\n      <li><a href="#" class="js-undo undo">Undo</a></li>\r\n      <li><a href="#" class="js-finish finish">Finish measurement</a></li>\r\n    </ul>\r\n  </div>\r\n</div>\r\n',p),d=r('<% if (model.pointCount > 0) { %>\r\n  <div class="group">\r\n      <table>\r\n        <tr>\r\n          <th style="padding-left:5px; padding-right:5px">Lat</th>\r\n          <th style="padding-left:5px; padding-right:5px">Lon</th>\r\n          <th style="padding-left:5px; padding-right:5px">Length (ft)</th>\r\n        </tr><tr>\r\n\r\n          <% for (i=0; i < model.points.length; i++) { %>\r\n            </tr><tr>\r\n              <td>\r\n                {{ numberFormat(model.points[i].lat, 6) }}\r\n              </td>\r\n              <td>\r\n                {{ numberFormat(model.points[i].lng, 6) }}\r\n              </td>\r\n              <td>\r\n                {{ model.lengths[i-1] }}\r\n              </td>\r\n            </tr>\r\n          <% } %>\r\n\r\n      </table>\r\n  </div>\r\n<% } %>\r\n\r\n<% if (model.pointCount > 1) { %>\r\n<div class="group">\r\n  <p><span class="heading"></span>Total Distance: {{ model.lengthDisplay }} Feet</p>\r\n</div>\r\n<% } %>\r\n<% if (model.pointCount > 2) { %>\r\n<div class="group">\r\n  <p><span class="heading"></span>Area: {{ model.areaDisplay }} Sq Feet</p>\r\n</div>\r\n<% } %>\r\n',p),m=r('<h3>Point location</h3>\r\n<table>\r\n  <tr>\r\n    <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Lat</span></th>\r\n    <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Lon</span></th>\r\n  </tr>\r\n  <tr>\r\n    <td style="padding-left:5px; padding-right:5px">\r\n      {{ numberFormat(model.lastCoord.dd.y, 6) }}\r\n    </td>\r\n    <td style="padding-left:5px; padding-right:5px">\r\n      {{ numberFormat(model.lastCoord.dd.x, 6) }}\r\n    </td>\r\n  </tr>\r\n</table>\r\n<ul class="tasks">\r\n  <li><a href="#" class="js-zoomto zoomto">Center on this location</a></li>\r\n  <li><a href="#" class="js-deletemarkup deletemarkup">Delete</a></li>\r\n</ul>\r\n',p),y=r('<h3>Linear measurement</h3>\r\n<p>{{ model.lengthDisplay }} Feet</p>\r\n<ul class="tasks">\r\n  <li><a href="#" class="js-zoomto zoomto">Center on this line</a></li>\r\n  <li><a href="#" class="js-deletemarkup deletemarkup">Delete</a></li>\r\n</ul>\r\n',p),g=r('<h3>Area measurement</h3>\r\n\r\n\r\n<% if (model.pointCount > 0) { %>\r\n  <p>\r\n    <table>\r\n      <tr>\r\n        <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Lat</span></th>\r\n        <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Lon</span></th>\r\n        <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Length (ft)</span></th>\r\n      </tr>\r\n      <tr>\r\n        <% for (i=0; i < model.points.length; i++) { %>\r\n          </tr><tr>\r\n            <td>\r\n              {{ numberFormat(model.points[i].lat, 6) }}\r\n            </td>\r\n            <td>\r\n              {{ numberFormat(model.points[i].lng, 6) }}\r\n            </td>\r\n            <td>\r\n              {{ model.lengths[i-1] }}\r\n            </td>\r\n          </tr>\r\n        <% } %>\r\n      </table>\r\n  </p>\r\n<% } %>\r\n<p>Total Distance: {{ model.lengthDisplay }} Feet</p>\r\n<p>Area: {{ model.areaDisplay }} Sq Feet</p>\r\n<ul class="tasks">\r\n  <li><a href="#" class="js-zoomto zoomto">Center on this area</a></li>\r\n  <li><a href="#" class="js-deletemarkup deletemarkup">Delete</a></li>\r\n</ul>\r\n',p);return t.Control.extend({_className:"leaflet-control-measure",options:{units:{},position:"topright",primaryLengthUnit:"feet",primaryAreaUnit:"sqfeet",activeColor:"#ABE67E",completedColor:"#74acbd",captureZIndex:1e4,popupOptions:{className:"leaflet-measure-resultpopup",autoPanPadding:[10,10]}},initialize:function(e){t.setOptions(this,e);var n=this.options,r=n.activeColor,o=n.completedColor;this._symbols=new u({activeColor:r,completedColor:o}),this.options.units=Object.assign({},i,this.options.units)},onAdd:function(e){return this._map=e,this._latlngs=[],this._lengths=[],this._lengthNotations=[],this._vertexCircleMarkers=[],this._measureFeatures=[],this._initLayout(),e.on("click",this._collapse,this),this._layer=t.layerGroup().addTo(e),this._container},onRemove:function(t){t.off("click",this._collapse,this),t.removeLayer(this._layer)},_initLayout:function(){var e=this._className,n=this._container=t.DomUtil.create("div",e+" leaflet-bar");n.innerHTML=h({model:{className:e}}),n.setAttribute("aria-haspopup",!0),t.DomEvent.disableClickPropagation(n),t.DomEvent.disableScrollPropagation(n);var r=this.$toggle=c(".js-toggle",n);this.$interaction=c(".js-interaction",n);var i=c(".js-start",n),o=c(".js-cancel",n),a=c(".js-undo",n),s=c(".js-finish",n);this.$startPrompt=c(".js-startprompt",n),this.$measuringPrompt=c(".js-measuringprompt",n),this.$startHelp=c(".js-starthelp",n),this.$results=c(".js-results",n),this.$measureTasks=c(".js-measuretasks",n),this._collapse(),this._updateMeasureNotStarted(),t.Browser.android||(t.DomEvent.on(n,"mouseenter",this._expand,this),t.DomEvent.on(n,"mouseleave",this._collapse,this)),t.DomEvent.on(r,"click",t.DomEvent.stop),t.Browser.touch?t.DomEvent.on(r,"click",this._expand,this):t.DomEvent.on(r,"focus",this._expand,this),t.DomEvent.on(i,"click",t.DomEvent.stop),t.DomEvent.on(i,"click",this._startMeasure,this),t.DomEvent.on(o,"click",t.DomEvent.stop),t.DomEvent.on(o,"click",this._finishMeasure,this),t.DomEvent.on(a,"click",t.DomEvent.stop),t.DomEvent.on(a,"click",this._undoMeasure,this),t.DomEvent.on(s,"click",t.DomEvent.stop),t.DomEvent.on(s,"click",this._handleMeasureDoubleClick,this)},_expand:function(){o(this.$toggle),a(this.$interaction)},_collapse:function(){this._locked||(o(this.$interaction),a(this.$toggle))},_updateMeasureNotStarted:function(){o(this.$startHelp),o(this.$results),o(this.$measureTasks),o(this.$measuringPrompt),a(this.$startPrompt)},_updateMeasureStartedNoPoints:function(){o(this.$results),a(this.$startHelp),a(this.$measureTasks),o(this.$startPrompt),a(this.$measuringPrompt)},_updateMeasureStartedWithPoints:function(){o(this.$startHelp),a(this.$results),a(this.$measureTasks),o(this.$startPrompt),a(this.$measuringPrompt)},_startMeasure:function(){this._locked=!0,this._measureLengths=t.featureGroup().addTo(this._layer),this._measureVertexes=t.featureGroup().addTo(this._layer),this._captureMarker=t.marker(this._map.getCenter(),{clickable:!0,zIndexOffset:this.options.captureZIndex,opacity:0}).addTo(this._layer),this._setCaptureMarkerIcon(),this._captureMarker.on("mouseout",this._handleMapMouseOut,this).on("dblclick",this._handleMeasureDoubleClick,this).on("click",this._handleMeasureClick,this),this._map.on("mousemove",this._handleMeasureMove,this).on("mouseout",this._handleMapMouseOut,this).on("move",this._centerCaptureMarker,this).on("resize",this._setCaptureMarkerIcon,this),t.DomEvent.on(this._container,"mouseenter",this._handleMapMouseOut,this),this._updateMeasureStartedNoPoints(),this._map.fire("measurestart",null,!1)},_undoMeasure:function(){this._latlngs=this._latlngs.slice(0,-1),this._removeLastLengthNotation(),this._removeLastVertex(),this._latlngs.length>0&&(this._addMeasureArea(this._latlngs),this._addMeasureBoundary(this._latlngs),this._updateResults()),0===this._latlngs.length&&this._updateMeasureStartedNoPoints()},_finishMeasure:function(e){var n;n=!0!==e;var r=Object.assign({},this._resultsModel,{points:this._latlngs});this._locked=!1,t.DomEvent.off(this._container,"mouseover",this._handleMapMouseOut,this),this._clearMeasure(n),this._captureMarker.off("mouseout",this._handleMapMouseOut,this).off("dblclick",this._handleMeasureDoubleClick,this).off("click",this._handleMeasureClick,this),this._map.off("mousemove",this._handleMeasureMove,this).off("mouseout",this._handleMapMouseOut,this).off("move",this._centerCaptureMarker,this).off("resize",this._setCaptureMarkerIcon,this),this._layer.removeLayer(this._measureVertexes).removeLayer(this._captureMarker),this._measureVertexes=null,this._updateMeasureNotStarted(),this._collapse(),this._map.fire("measurefinish",r,!1)},_clearMeasure:function(t){this._latlngs=[],this._resultsModel=null,t&&this._measureLengths.clearLayers(),this._measureVertexes.clearLayers(),this._measureDrag&&this._layer.removeLayer(this._measureDrag),this._measureArea&&this._layer.removeLayer(this._measureArea),this._measureBoundary&&this._layer.removeLayer(this._measureBoundary),this._measureDrag=null,this._measureArea=null,this._measureBoundary=null},_centerCaptureMarker:function(){this._captureMarker.setLatLng(this._map.getCenter())},_setCaptureMarkerIcon:function(){this._captureMarker.setIcon(t.divIcon({iconSize:this._map.getSize().multiplyBy(2)}))},_getMeasurementDisplayStrings:function(t){var e=this.options.units;return{lengthDisplay:n(t.length,this.options.primaryLengthUnit,this.options.secondaryLengthUnit,this.options.decPoint,this.options.thousandsSep),areaDisplay:n(t.area,this.options.primaryAreaUnit,this.options.secondaryAreaUnit,this.options.decPoint,this.options.thousandsSep)};function n(t,n,i,o,a){var s;return n&&e[n]?(s=r(t,e[n],o,a),s=i&&e[i]?s+" ("+r(t,e[i],o,a)+")":r(t,null,o,a),s):r(t,null,o,a)}function r(t,e,n,r){var i=e.display;return[formattedNumber,{acres:"Acres",feet:"Feet",kilometers:"Kilometers",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles"}[i]||i].join(" ")}},_getShorterMeasurementDisplayStrings:function(t){var e=this.options.units;return{lengthDisplay:n(t.length,this.options.primaryLengthUnit,this.options.secondaryLengthUnit,".",this.options.thousandsSep),areaDisplay:n(t.area,this.options.primaryAreaUnit,this.options.secondaryAreaUnit,this.options.decPoint,this.options.thousandsSep)};function n(t,n,i,o,a){var s;return n?(s=r(t,e[n],o,a),i&&e[i]&&(s=s+" ("+r(t,e[i],o,a)+")")):s=r(t,null,o,a),s}function r(t,e,n,r){var i=Object.assign({factor:1,decimals:2},e);return f(t*i.factor,i.decimals)}},_updateResults:function(){var t=s(this._latlngs),e=this._resultsModel=Object.assign({},t,this._getShorterMeasurementDisplayStrings(t),{pointCount:this._latlngs.length,points:this._latlngs,lengths:this._lengths});this.$results.innerHTML=d({model:e})},_handleMeasureMove:function(e){this._measureDrag?this._measureDrag.setLatLng(e.latlng):this._measureDrag=t.circleMarker(e.latlng,this._symbols.getSymbol("measureDrag")).addTo(this._layer),this._measureDrag.bringToFront()},_handleMeasureDoubleClick:function(){var e=this._latlngs,n=t.layerGroup();n.addTo(this._layer),this._measureFeatures.push(n),this._measureLengths.removeFrom(this._layer),this._measureLengths.addTo(n),this._finishMeasure(!0);for(var r=[],i=0;i<this._lengths.length;i++)r[i]=this._lengths[i];if(e.length){if(e.length>2){e.push((e||[])[0]);var o=e.length,a=e[o-2],l=e[o-1],u=t.latLngBounds(a,l).getCenter(),f=s([a,l]);this._addNewLengthNotation(u,f).addTo(this._measureLengths);var p=this._lengths.length;r[p-1]=this._lengths[p-1]}var h,d,v,b,_,S=s(e);if(1===e.length)h=t.circleMarker(e[0],this._symbols.getSymbol("resultPoint")),d=m({model:S});else if(2===e.length)h=t.polyline(e,this._symbols.getSymbol("resultLine")),d=y({model:Object.assign({},S,this._getShorterMeasurementDisplayStrings(S))});else{h=t.polygon(e,this._symbols.getSymbol("resultArea"));var x=Object.assign({},S,this._getShorterMeasurementDisplayStrings(S),{pointCount:e.length,points:e,lengths:this._lengths});d=g({model:x})}this._lengths=[],this._vertexCircleMarkers=[],(v=t.DomUtil.create("div","")).innerHTML=d,(b=c(".js-zoomto",v))&&(t.DomEvent.on(b,"click",t.DomEvent.stop),t.DomEvent.on(b,"click",function(){h.getBounds?this._map.fitBounds(h.getBounds(),{padding:[20,20],maxZoom:17}):h.getLatLng&&this._map.panTo(h.getLatLng())},this)),(_=c(".js-deletemarkup",v))&&(t.DomEvent.on(_,"click",t.DomEvent.stop),t.DomEvent.on(_,"click",function(){var t=this._measureFeatures.indexOf(n);this._measureFeatures[t].removeFrom(this._layer)},this)),h.addTo(n),h.bindPopup(v,this.options.popupOptions),h.getBounds?h.openPopup(h.getBounds().getCenter()):h.getLatLng&&h.openPopup(h.getLatLng())}},_handleMeasureClick:function(e){var n=this._map.mouseEventToLatLng(e.originalEvent),r=(this._latlngs||[]).slice(-1)[0],i=(this._latlngs||[])[0],o=this._symbols.getSymbol("measureVertex");if(!r||!n.equals(r)){if(this._latlngs.push(n),this._addMeasureArea(this._latlngs),this._addMeasureBoundary(this._latlngs),this._measureVertexes.eachLayer(function(t){t.setStyle(o),t._path&&t._path.setAttribute("class",o.className)}),this._addNewVertex(n),i){var a=this._latlngs.length,l=this._latlngs[a-2],u=t.latLngBounds(l,n).getCenter(),c=s([l,n]);this._addNewLengthNotation(u,c).addTo(this._measureLengths)}this._measureBoundary&&this._measureBoundary.bringToFront(),this._measureVertexes.bringToFront()}this._updateResults(),this._updateMeasureStartedWithPoints()},_addNewLengthNotation:function(e,n){var r=this._getShorterMeasurementDisplayStrings(n),i=t.divIcon({className:"my-div-icon",html:r.lengthDisplay}),o=t.marker(e,{icon:i});return this._lengths.push(r.lengthDisplay),this._lengthNotations.push(o),o},_removeLastLengthNotation:function(){var t=this._lengthNotations.length;this._lengthNotations.length>0&&this._lengthNotations[t-1].removeFrom(this._measureLengths),this._lengthNotations=this._lengthNotations.slice(0,-1),this._lengths=this._lengths.slice(0,-1)},_handleMapMouseOut:function(){this._measureDrag&&(this._layer.removeLayer(this._measureDrag),this._measureDrag=null)},_addNewVertex:function(e){var n=t.circleMarker(e,this._symbols.getSymbol("measureVertexActive"));this._vertexCircleMarkers.push(n),n.addTo(this._measureVertexes)},_removeLastVertex:function(){var t=this._vertexCircleMarkers.length;this._vertexCircleMarkers.length>0&&this._vertexCircleMarkers[t-1].removeFrom(this._measureVertexes),this._vertexCircleMarkers=this._vertexCircleMarkers.slice(0,-1)},_addMeasureArea:function(e){e.length<3?this._measureArea&&(this._layer.removeLayer(this._measureArea),this._measureArea=null):this._measureArea?this._measureArea.setLatLngs(e):this._measureArea=t.polygon(e,this._symbols.getSymbol("measureArea")).addTo(this._layer)},_addMeasureBoundary:function(e){e.length<2?this._measureBoundary&&(this._layer.removeLayer(this._measureBoundary),this._measureBoundary=null):this._measureBoundary?this._measureBoundary.setLatLngs(e):this._measureBoundary=t.polyline(e,this._symbols.getSymbol("measureBoundary")).addTo(this._layer)}})})},"852f":function(t,e,n){"use strict";var r=n("cfd5"),i=n.n(r);i.a},"85e3":function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=n},"872a":function(t,e,n){var r=n("3b4a");function i(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}t.exports=i},"88c2":function(t,e,n){(function(t,n){n(e)})(0,function(t){"use strict";function e(){}function n(t){if(!t)return e;var n,r,i=t.scale[0],o=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,e){e||(n=r=0),t[0]=(n+=t[0])*i+a,t[1]=(r+=t[1])*o+s}}function r(t){if(!t)return e;var n,r,i=t.scale[0],o=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,e){e||(n=r=0);var l=Math.round((t[0]-a)/i),u=Math.round((t[1]-s)/o);t[0]=l-n,t[1]=u-r,n=l,r=u}}function i(t,e){var n,r=t.length,i=r-e;while(i<--r)n=t[i],t[i++]=t[r],t[r]=n}function o(t,e){var n=0,r=t.length;while(n<r){var i=n+r>>>1;t[i]<e?n=i+1:r=i}return n}function a(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return s(t,e)})}:s(t,e)}function s(t,e){var n={type:"Feature",id:e.id,properties:e.properties||{},geometry:l(t,e)};return null==e.id&&delete n.id,n}function l(t,e){var r=n(t.transform),o=t.arcs;function a(t,e){e.length&&e.pop();for(var n,a=o[t<0?~t:t],s=0,l=a.length;s<l;++s)e.push(n=a[s].slice()),r(n,s);t<0&&i(e,l)}function s(t){return t=t.slice(),r(t,0),t}function l(t){for(var e=[],n=0,r=t.length;n<r;++n)a(t[n],e);return e.length<2&&e.push(e[0].slice()),e}function u(t){var e=l(t);while(e.length<4)e.push(e[0].slice());return e}function c(t){return t.map(u)}function f(t){var e=t.type;return"GeometryCollection"===e?{type:e,geometries:t.geometries.map(f)}:e in p?{type:e,coordinates:p[e](t)}:null}var p={Point:function(t){return s(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(s)},LineString:function(t){return l(t.arcs)},MultiLineString:function(t){return t.arcs.map(l)},Polygon:function(t){return c(t.arcs)},MultiPolygon:function(t){return t.arcs.map(c)}};return f(e)}function u(t,e){var n={},r={},i={},o=[],a=-1;function s(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}function l(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){n[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)}),e.forEach(function(t){var e,n,o=s(t),a=o[0],l=o[1];if(e=i[a])if(delete i[e.end],e.push(t),e.end=l,n=r[l]){delete r[n.start];var u=n===e?e:e.concat(n);r[u.start=e.start]=i[u.end=n.end]=u}else r[e.start]=i[e.end]=e;else if(e=r[l])if(delete r[e.start],e.unshift(t),e.start=a,n=i[a]){delete i[n.end];var c=n===e?e:n.concat(e);r[c.start=n.start]=i[c.end=e.end]=c}else r[e.start]=i[e.end]=e;else e=[t],r[e.start=a]=i[e.end=l]=e}),l(i,r),l(r,i),e.forEach(function(t){n[t<0?~t:t]||o.push([t])}),o}function c(t){return l(t,f.apply(this,arguments))}function f(t,e,n){var r=[];function i(t){var e=t<0?~t:t;(c[e]||(c[e]=[])).push({i:t,g:l})}function o(t){t.forEach(i)}function a(t){t.forEach(o)}function s(t){"GeometryCollection"===t.type?t.geometries.forEach(s):t.type in f&&(l=t,f[t.type](t.arcs))}if(arguments.length>1){var l,c=[],f={LineString:o,MultiLineString:a,Polygon:a,MultiPolygon:function(t){t.forEach(a)}};s(e),c.forEach(arguments.length<3?function(t){r.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&r.push(t[0].i)})}else for(var p=0,h=t.arcs.length;p<h;++p)r.push(p);return{type:"MultiLineString",arcs:u(t,r)}}function p(t){var e=t[0],n=t[1],r=t[2];return Math.abs((e[0]-r[0])*(n[1]-e[1])-(e[0]-n[0])*(r[1]-e[1]))}function h(t){var e,n=-1,r=t.length,i=t[r-1],o=0;while(++n<r)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return o/2}function d(t){return l(t,m.apply(this,arguments))}function m(t,e){var n={},r=[],i=[];function o(t){t.forEach(function(e){e.forEach(function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)})}),r.push(t)}function a(e){return Math.abs(h(l(t,{type:"Polygon",arcs:[e]}).coordinates[0]))}return e.forEach(function(t){"Polygon"===t.type?o(t.arcs):"MultiPolygon"===t.type&&t.arcs.forEach(o)}),r.forEach(function(t){if(!t._){var e=[],r=[t];t._=1,i.push(e);while(t=r.pop())e.push(t),t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].forEach(function(t){t._||(t._=1,r.push(t))})})})}}),r.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:i.map(function(e){var r,i=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].length<2&&i.push(t)})})}),i=u(t,i),(r=i.length)>1)for(var o,s,l=1,c=a(i[0]);l<r;++l)(o=a(i[l]))>c&&(s=i[0],i[0]=i[l],i[l]=s,c=o);return i})}}function y(t){var e={},n=t.map(function(){return[]});function r(t,n){t.forEach(function(t){t<0&&(t=~t);var r=e[t];r?r.push(n):e[t]=[n]})}function i(t,e){t.forEach(function(t){r(t,e)})}function a(t,e){"GeometryCollection"===t.type?t.geometries.forEach(function(t){a(t,e)}):t.type in s&&s[t.type](t.arcs,e)}var s={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(t,e){t.forEach(function(t){i(t,e)})}};for(var l in t.forEach(a),e)for(var u=e[l],c=u.length,f=0;f<c;++f)for(var p=f+1;p<c;++p){var h,d=u[f],m=u[p];(h=n[d])[l=o(h,m)]!==m&&h.splice(l,0,m),(h=n[m])[l=o(h,d)]!==d&&h.splice(l,0,d)}return n}function g(t,e){return t[1][2]-e[1][2]}function v(){var t={},e=[],n=0;function r(t,n){while(n>0){var r=(n+1>>1)-1,i=e[r];if(g(t,i)>=0)break;e[i._=n]=i,e[t._=n=r]=t}}function i(t,r){while(1){var i=r+1<<1,o=i-1,a=r,s=e[a];if(o<n&&g(e[o],s)<0&&(s=e[a=o]),i<n&&g(e[i],s)<0&&(s=e[a=i]),a===r)break;e[s._=r]=s,e[t._=r=a]=t}}return t.push=function(t){return r(e[t._=n]=t,n++),n},t.pop=function(){if(!(n<=0)){var t,r=e[0];return--n>0&&(t=e[n],i(e[t._=0]=t,0)),r}},t.remove=function(t){var o,a=t._;if(e[a]===t)return a!==--n&&(o=e[n],(g(o,t)<0?r:i)(e[o._=a]=o,a)),a},t}function b(t,e){var i=n(t.transform),o=r(t.transform),a=v();function s(t){a.remove(t),t[1][2]=e(t),a.push(t)}return e||(e=p),t.arcs.forEach(function(t){var n,r,l,u,c=[],f=0;for(r=0,l=t.length;r<l;++r)u=t[r],i(t[r]=[u[0],u[1],1/0],r);for(r=1,l=t.length-1;r<l;++r)n=t.slice(r-1,r+2),n[1][2]=e(n),c.push(n),a.push(n);for(r=0,l=c.length;r<l;++r)n=c[r],n.previous=c[r-1],n.next=c[r+1];while(n=a.pop()){var p=n.previous,h=n.next;n[1][2]<f?n[1][2]=f:f=n[1][2],p&&(p.next=h,p[2]=n[2],s(p)),h&&(h.previous=p,h[0]=n[0],s(h))}t.forEach(o)}),t}var _="1.6.26";t.version=_,t.mesh=c,t.meshArcs=f,t.merge=d,t.mergeArcs=m,t.feature=a,t.neighbors=y,t.presimplify=b})},"8eeb":function(t,e,n){var r=n("32b3"),i=n("872a");function o(t,e,n,o){var a=!n;n||(n={});var s=-1,l=e.length;while(++s<l){var u=e[s],c=o?o(n[u],t[u],u,n,t):void 0;void 0===c&&(c=t[u]),a?i(n,u,c):r(n,u,c)}return n}t.exports=o},"91e9":function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},9331:function(t,e,n){"use strict";var r=n("83ae"),i=n.n(r);i.a},9427:function(t,e,n){var r=n("63b6");r(r.S,"Object",{create:n("a159")})},9520:function(t,e,n){var r=n("3729"),i=n("1a8c"),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";function u(t){if(!i(t))return!1;var e=r(t);return e==a||e==s||e==o||e==l}t.exports=u},"95d5":function(t,e,n){var r=n("40c3"),i=n("5168")("iterator"),o=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||o.hasOwnProperty(r(e))}},9638:function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},9740:function(t,e,n){var r=n("9638"),i=Object.prototype,o=i.hasOwnProperty;function a(t,e,n,a){return void 0===t||r(t,i[n])&&!o.call(a,n)?e:t}t.exports=a},9934:function(t,e,n){var r=n("6fcd"),i=n("41c3"),o=n("30c9");function a(t){return o(t)?r(t,!0):i(t)}t.exports=a},"99d3":function(t,e,n){(function(t){var r=n("585a"),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a&&r.process,l=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=l}).call(this,n("62e4")(t))},"9aff":function(t,e,n){var r=n("9638"),i=n("30c9"),o=n("c098"),a=n("1a8c");function s(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}t.exports=s},"9e1c":function(t,e,n){n("7d6d"),t.exports=n("584a").Object.values},"9e69":function(t,e,n){var r=n("2b3e"),i=r.Symbol;t.exports=i},"9ee1":function(t,e,n){},"9f79":function(t,e,n){var r=n("f772");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},a22a:function(t,e,n){var r=n("d864"),i=n("b0dc"),o=n("3702"),a=n("e4ae"),s=n("b447"),l=n("7cd6"),u={},c={};e=t.exports=function(t,e,n,f,p){var h,d,m,y,g=p?function(){return t}:l(t),v=r(n,f,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(h=s(t.length);h>b;b++)if(y=e?v(a(d=t[b])[0],d[1]):v(t[b]),y===u||y===c)return y}else for(m=g.call(t);!(d=m.next()).done;)if(y=i(m,v,d.value,e),y===u||y===c)return y};e.BREAK=u,e.RETURN=c},a454:function(t,e,n){var r=n("72f0"),i=n("3b4a"),o=n("cd9d"),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},a8db:function(t,e,n){"use strict";var r=n("e265"),i=n.n(r),o=n("a4bb"),a=n.n(o);function s(t,e){if(null==t)return{};var n,r,i={},o=a()(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function l(t,e){if(null==t)return{};var n,r,o=s(t,e);if(i.a){var a=i()(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}n.d(e,"a",function(){return l})},ab09:function(t,e,n){(function(e){var r=function(){"use strict";var t,r=/\s*/g,i=/^\s*|\s*$/g,o=/\s+/;function a(t){if(!t||!t.length)return 0;for(var e=0,n=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e)|0;return n}function s(t,e){return t.getElementsByTagName(e)}function l(t,e){return t.getAttribute(e)}function u(t,e){return parseFloat(l(t,e))}function c(t,e){var n=s(t,e);return n.length?n[0]:null}function f(t){return t.normalize&&t.normalize(),t}function p(t){for(var e=0,n=[];e<t.length;e++)n[e]=parseFloat(t[e]);return n}function h(t){var e={};for(var n in t)t[n]&&(e[n]=t[n]);return e}function d(t){return t&&f(t),t&&t.textContent||""}function m(t){return p(t.replace(r,"").split(","))}function y(t){for(var e=t.replace(i,"").split(o),n=[],r=0;r<e.length;r++)n.push(m(e[r]));return n}function g(t){var e,n=[u(t,"lon"),u(t,"lat")],r=c(t,"ele"),i=c(t,"gpxtpx:hr")||c(t,"hr"),o=c(t,"time");return r&&(e=parseFloat(d(r)),isNaN(e)||n.push(e)),{coordinates:n,time:o?d(o):null,heartRate:i?parseFloat(d(i)):null}}function v(){return{type:"FeatureCollection",features:[]}}function b(e){return void 0!==e.xml?e.xml:t.serializeToString(e)}"undefined"!==typeof XMLSerializer?t=new XMLSerializer:"object"!==typeof e||e.browser||(t=new(n(1).XMLSerializer));var _={kml:function(t){for(var e=v(),n={},r=["Polygon","LineString","Point","Track","gx:Track"],i=s(t,"Placemark"),o=s(t,"Style"),u=s(t,"StyleMap"),f=0;f<o.length;f++)n["#"+l(o[f],"id")]=a(b(o[f])).toString(16);for(var h=0;h<u.length;h++)n["#"+l(u[h],"id")]=a(b(u[h])).toString(16);for(var g=0;g<i.length;g++)e.features=e.features.concat(L(i[g]));function _(t){var e,n;return t=t||"","#"===t.substr(0,1)&&(t=t.substr(1)),6!==t.length&&3!==t.length||(e=t),8===t.length&&(n=parseInt(t.substr(0,2),16)/255,e="#"+t.substr(2)),[e,isNaN(n)?void 0:n]}function S(t){return p(t.split(" "))}function x(t){var e=s(t,"coord","gx"),n=[],r=[];0===e.length&&(e=s(t,"gx:coord"));for(var i=0;i<e.length;i++)n.push(S(d(e[i])));for(var o=s(t,"when"),a=0;a<o.length;a++)r.push(d(o[a]));return{coords:n,times:r}}function w(t){var e,n,i,o,a,l=[],u=[];if(c(t,"MultiGeometry"))return w(c(t,"MultiGeometry"));if(c(t,"MultiTrack"))return w(c(t,"MultiTrack"));if(c(t,"gx:MultiTrack"))return w(c(t,"gx:MultiTrack"));for(i=0;i<r.length;i++)if(n=s(t,r[i]),n)for(o=0;o<n.length;o++)if(e=n[o],"Point"===r[i])l.push({type:"Point",coordinates:m(d(c(e,"coordinates")))});else if("LineString"===r[i])l.push({type:"LineString",coordinates:y(d(c(e,"coordinates")))});else if("Polygon"===r[i]){var f=s(e,"LinearRing"),p=[];for(a=0;a<f.length;a++)p.push(y(d(c(f[a],"coordinates"))));l.push({type:"Polygon",coordinates:p})}else if("Track"===r[i]||"gx:Track"===r[i]){var h=x(e);l.push({type:"LineString",coordinates:h.coords}),h.times.length&&u.push(h.times)}return{geoms:l,coordTimes:u}}function L(t){var e,r=w(t),i={},o=d(c(t,"name")),a=d(c(t,"styleUrl")),u=d(c(t,"description")),f=c(t,"TimeSpan"),p=c(t,"ExtendedData"),h=c(t,"LineStyle"),m=c(t,"PolyStyle");if(!r.geoms.length)return[];if(o&&(i.name=o),"#"!==a[0]&&(a="#"+a),a&&n[a]&&(i.styleUrl=a,i.styleHash=n[a]),u&&(i.description=u),f){var y=d(c(f,"begin")),g=d(c(f,"end"));i.timespan={begin:y,end:g}}if(h){var v=_(d(c(h,"color"))),b=v[0],S=v[1],x=parseFloat(d(c(h,"width")));b&&(i.stroke=b),isNaN(S)||(i["stroke-opacity"]=S),isNaN(x)||(i["stroke-width"]=x)}if(m){var L=_(d(c(m,"color"))),C=L[0],M=L[1],k=d(c(m,"fill")),I=d(c(m,"outline"));C&&(i.fill=C),isNaN(M)||(i["fill-opacity"]=M),k&&(i["fill-opacity"]="1"===k?1:0),I&&(i["stroke-opacity"]="1"===I?1:0)}if(p){var E=s(p,"Data"),P=s(p,"SimpleData");for(e=0;e<E.length;e++)i[E[e].getAttribute("name")]=d(c(E[e],"value"));for(e=0;e<P.length;e++)i[P[e].getAttribute("name")]=d(P[e])}r.coordTimes.length&&(i.coordTimes=1===r.coordTimes.length?r.coordTimes[0]:r.coordTimes);var $={type:"Feature",geometry:1===r.geoms.length?r.geoms[0]:{type:"GeometryCollection",geometries:r.geoms},properties:i};return l(t,"id")&&($.id=l(t,"id")),[$]}return e},gpx:function(t){var e,n,r=s(t,"trk"),i=s(t,"rte"),o=s(t,"wpt"),a=v();for(e=0;e<r.length;e++)n=u(r[e]),n&&a.features.push(n);for(e=0;e<i.length;e++)n=f(i[e]),n&&a.features.push(n);for(e=0;e<o.length;e++)a.features.push(p(o[e]));function l(t,e){var n=s(t,e),r=[],i=[],o=[],a=n.length;if(a<2)return{};for(var l=0;l<a;l++){var u=g(n[l]);r.push(u.coordinates),u.time&&i.push(u.time),u.heartRate&&o.push(u.heartRate)}return{line:r,times:i,heartRates:o}}function u(t){for(var e,n=s(t,"trkseg"),r=[],i=[],o=[],a=0;a<n.length;a++)e=l(n[a],"trkpt"),e.line&&r.push(e.line),e.times&&e.times.length&&i.push(e.times),e.heartRates&&e.heartRates.length&&o.push(e.heartRates);if(0!==r.length){var u=m(t);return i.length&&(u.coordTimes=1===r.length?i[0]:i),o.length&&(u.heartRates=1===r.length?o[0]:o),{type:"Feature",properties:u,geometry:{type:1===r.length?"LineString":"MultiLineString",coordinates:1===r.length?r[0]:r}}}}function f(t){var e=l(t,"rtept");if(e.line){var n={type:"Feature",properties:m(t),geometry:{type:"LineString",coordinates:e.line}};return n}}function p(t){var e=m(t);return e.sym=d(c(t,"sym")),{type:"Feature",properties:e,geometry:{type:"Point",coordinates:g(t).coordinates}}}function m(t){var e,n=["name","desc","author","copyright","link","time","keywords"],r={};for(e=0;e<n.length;e++)r[n[e]]=d(c(t,n[e]));return h(r)}return a}};return _}();t.exports=r}).call(this,n("4362"))},ada4:function(t,e,n){"use strict";var r=n("e53d"),i=n("63b6"),o=n("ebfd"),a=n("294c"),s=n("35e8"),l=n("5c95"),u=n("a22a"),c=n("1173"),f=n("f772"),p=n("45f2"),h=n("d9f6").f,d=n("57b1")(0),m=n("8e60");t.exports=function(t,e,n,y,g,v){var b=r[t],_=b,S=g?"set":"add",x=_&&_.prototype,w={};return m&&"function"==typeof _&&(v||x.forEach&&!a(function(){(new _).entries().next()}))?(_=e(function(e,n){c(e,_,t,"_c"),e._c=new b,void 0!=n&&u(n,g,e[S],e)}),d("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in x&&(!v||"clear"!=t)&&s(_.prototype,t,function(n,r){if(c(this,_,t),!e&&v&&!f(n))return"get"==t&&void 0;var i=this._c[t](0===n?0:n,r);return e?this:i})}),v||h(_.prototype,"size",{get:function(){return this._c.size}})):(_=y.getConstructor(e,t,g,S),l(_.prototype,n),o.NEED=!0),p(_,t),w[t]=_,i(i.G+i.W+i.F,w),v||y.setStrong(_,t,g),_}},adaa:function(t,e,n){var r=n("85e3"),i=n("100e"),o=n("3eda"),a=i(function(t,e){try{return r(t,void 0,e)}catch(n){return o(n)?n:new Error(n)}});t.exports=a},afeb:function(t,e,n){},b047:function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},b0b4:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("85f2"),i=n.n(r);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}},b0dc:function(t,e,n){var r=n("e4ae");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(a){var o=t["return"];throw void 0!==o&&r(o.call(t)),a}}},b218:function(t,e){var n=9007199254740991;function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}t.exports=r},b6d0:function(t,e,n){t.exports=n("fa2b")},bfac:function(t,e,n){var r=n("0b64");t.exports=function(t,e){return new(r(t))(e)}},c098:function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function i(t,e){var i=typeof t;return e=null==e?n:e,!!e&&("number"==i||"symbol"!=i&&r.test(t))&&t>-1&&t%1==0&&t<e}t.exports=i},c1c9:function(t,e,n){var r=n("a454"),i=n("f3c1"),o=i(r);t.exports=o},c276:function(t,e){var n=/<%-([\s\S]+?)%>/g;t.exports=n},c30c:function(t,e,n){var r=n("8eeb"),i=n("2ec1"),o=n("9934"),a=i(function(t,e,n,i){r(e,o(e),t,i)});t.exports=a},c6fb:function(t,e,n){n("7075")("Set")},c865:function(t,e,n){"use strict";var r=n("41ef"),i=n.n(r);i.a},c8bb:function(t,e,n){t.exports=n("54a1")},cd9d:function(t,e){function n(t){return t}t.exports=n},ce86:function(t,e,n){var r=n("9e69"),i=n("7948"),o=n("6747"),a=n("ffd6"),s=1/0,l=r?r.prototype:void 0,u=l?l.toString:void 0;function c(t){if("string"==typeof t)return t;if(o(t))return i(t,c)+"";if(a(t))return u?u.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}t.exports=c},cfd5:function(t,e,n){},d225:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r})},d2c8:function(t,e,n){var r=n("aae3"),i=n("be13");t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},d370:function(t,e,n){var r=n("253c"),i=n("1310"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},da03:function(t,e,n){var r=n("2b3e"),i=r["__core-js_shared__"];t.exports=i},db0c:function(t,e,n){t.exports=n("9e1c")},dc57:function(t,e){var n=Function.prototype,r=n.toString;function i(t){if(null!=t){try{return r.call(t)}catch(e){}try{return t+""}catch(e){}}return""}t.exports=i},dc62:function(t,e,n){n("9427");var r=n("584a").Object;t.exports=function(t,e){return r.create(t,e)}},ddc6:function(t,e){function n(t){return function(e){return null==t?void 0:t[e]}}t.exports=n},e265:function(t,e,n){t.exports=n("ed33")},e747:function(t,e,n){"use strict";n.r(e);var r=n("4630"),i=n("7c8d"),o=n("cd1f");function a(t,e){if(e=e||{},!Object(o["e"])(e))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return Object(i["d"])(t,function(t,n){var i=n.geometry.coordinates;return t+Object(r["a"])(i[0],i[1],e)},0)}e["default"]=a},eac5:function(t,e){var n=Object.prototype;function r(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||n;return t===r}t.exports=r},ead6:function(t,e,n){var r=n("f772"),i=n("e4ae"),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n("d864")(Function.call,n("bf0b").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},ec69:function(t,e,n){var r=n("6fcd"),i=n("03dd"),o=n("30c9");function a(t){return o(t)?r(t):i(t)}t.exports=a},ec8c:function(t,e){function n(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=n},ed33:function(t,e,n){n("014b"),t.exports=n("584a").Object.getOwnPropertySymbols},ef03:function(t,e,n){var r=n("c30c"),i=n("adaa"),o=n("266a"),a=n("9740"),s=n("5226"),l=n("3eda"),u=n("9aff"),c=n("ec69"),f=n("eff0"),p=n("66a9"),h=n("76dd"),d=/\b__p \+= '';/g,m=/\b(__p \+=) '' \+/g,y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,g=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,v=/($^)/,b=/['\n\r\u2028\u2029\\]/g;function _(t,e,n){var _=p.imports._.templateSettings||p;n&&u(t,e,n)&&(e=void 0),t=h(t),e=r({},e,_,a);var S,x,w=r({},e.imports,_.imports,a),L=c(w),C=o(w,L),M=0,k=e.interpolate||v,I="__p += '",E=RegExp((e.escape||v).source+"|"+k.source+"|"+(k===f?g:v).source+"|"+(e.evaluate||v).source+"|$","g"),P="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";t.replace(E,function(e,n,r,i,o,a){return r||(r=i),I+=t.slice(M,a).replace(b,s),n&&(S=!0,I+="' +\n__e("+n+") +\n'"),o&&(x=!0,I+="';\n"+o+";\n__p += '"),r&&(I+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),M=a+e.length,e}),I+="';\n";var $=e.variable;$||(I="with (obj) {\n"+I+"\n}\n"),I=(x?I.replace(d,""):I).replace(m,"$1").replace(y,"$1;"),I="function("+($||"obj")+") {\n"+($?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(S?", __e = _.escape":"")+(x?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+I+"return __p\n}";var O=i(function(){return Function(L,P+"return "+I).apply(void 0,C)});if(O.source=I,l(O))throw O;return O}t.exports=_},eff0:function(t,e){var n=/<%=([\s\S]+?)%>/g;t.exports=n},f02b:function(t,e,n){},f0a4:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("default")],2)},i=[],o=n("d225"),a=n("b0b4"),s=n("308d"),l=n("6bb5"),u=n("4e2b"),c=n("e11e"),f={name:"Control",props:["position"],methods:{createLeafletElement:function(t){var e=function(e){function n(t,e){var r;return Object(o["a"])(this,n),r=Object(s["a"])(this,Object(l["a"])(n).call(this,e)),r.el=t,r}return Object(u["a"])(n,e),Object(a["a"])(n,[{key:"onAdd",value:function(){var e=this.el;return t.DomEvent.disableClickPropagation(e),t.DomEvent.disableScrollPropagation(e),e}}]),n}(t.Control),n=this.$el;return new e(n,{position:this.position})},parentMounted:function(t,e){var n=this.createLeafletElement(c);this.$leafletElement=n;var r=t.$leafletElement;n.addTo(r)}}},p=f,h=n("2877"),d=Object(h["a"])(p,r,i,!1,null,null,null);e["default"]=d.exports},f228:function(t,e,n){var r=n("40c3"),i=n("4517");t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},f3c1:function(t,e){var n=800,r=16,i=Date.now;function o(t){var e=0,o=0;return function(){var a=i(),s=r-(a-o);if(o=a,s>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}t.exports=o},f7726:function(t,e,n){function r(t,e,n){var r=!1;if("undefined"===typeof window.XMLHttpRequest)return e(Error("Browser not supported"));if("undefined"===typeof n){var i=t.match(/^\s*https?:\/\/[^\/]*/);n=i&&i[0]!==location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}var o=new window.XMLHttpRequest;function a(t){return t>=200&&t<300||304===t}if(n&&!("withCredentials"in o)){o=new window.XDomainRequest;var s=e;e=function(){if(r)s.apply(this,arguments);else{var t=this,e=arguments;setTimeout(function(){s.apply(t,e)},0)}}}function l(){void 0===o.status||a(o.status)?e.call(o,null,o):e.call(o,o,null)}return"onload"in o?o.onload=l:o.onreadystatechange=function(){4===o.readyState&&l()},o.onerror=function(t){e.call(this,t||!0,null),e=function(){}},o.onprogress=function(){},o.ontimeout=function(t){e.call(this,t,null),e=function(){}},o.onabort=function(t){e.call(this,t,null),e=function(){}},o.open("GET",t,!0),o.send(null),r=!0,o}t.exports=r},fa2b:function(t,e,n){n("c207"),n("1654"),n("6c1c"),n("07d8"),n("74be"),n("c6fb"),n("57e3"),t.exports=n("584a").Set},fa99:function(t,e,n){n("0293"),t.exports=n("584a").Object.getPrototypeOf},fdc8:function(t,e,n){"use strict";var r=n("9ee1"),i=n.n(r);i.a},fe40:function(t,e,n){var r=n("ddc6"),i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o=r(i);t.exports=o},ffb7:function(t,e,n){"use strict";function r(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function i(t,e){var n=r(t);return function(r,i){return e(n(r),i,t)}}function o(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}n.r(e);var a=function(t){var e=new RegExp('["'+t+"\n]"),n=t.charCodeAt(0);function a(t,e){var n,o,a=s(t,function(t,a){if(n)return n(t,a-1);o=t,n=e?i(t,e):r(t)});return a.columns=o,a}function s(t,e){var r,i,o={},a={},s=[],l=t.length,u=0,c=0;function f(){if(u>=l)return a;if(i)return i=!1,o;var e,r=u;if(34===t.charCodeAt(r)){var s=r;while(s++<l)if(34===t.charCodeAt(s)){if(34!==t.charCodeAt(s+1))break;++s}return u=s+2,e=t.charCodeAt(s+1),13===e?(i=!0,10===t.charCodeAt(s+2)&&++u):10===e&&(i=!0),t.slice(r+1,s).replace(/""/g,'"')}while(u<l){var c=1;if(e=t.charCodeAt(u++),10===e)i=!0;else if(13===e)i=!0,10===t.charCodeAt(u)&&(++u,++c);else if(e!==n)continue;return t.slice(r,u-c)}return t.slice(r)}while((r=f())!==a){var p=[];while(r!==o&&r!==a)p.push(r),r=f();e&&null==(p=e(p,c++))||s.push(p)}return s}function l(e,n){return null==n&&(n=o(e)),[n.map(f).join(t)].concat(e.map(function(e){return n.map(function(t){return f(e[t])}).join(t)})).join("\n")}function u(t){return t.map(c).join("\n")}function c(e){return e.map(f).join(t)}function f(t){return null==t?"":e.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}return{parse:a,parseRows:s,format:l,formatRows:u}},s=a(","),l=s.parse,u=s.parseRows,c=s.format,f=s.formatRows,p=a("\t"),h=p.parse,d=p.parseRows,m=p.format,y=p.formatRows;n.d(e,"dsvFormat",function(){return a}),n.d(e,"csvParse",function(){return l}),n.d(e,"csvParseRows",function(){return u}),n.d(e,"csvFormat",function(){return c}),n.d(e,"csvFormatRows",function(){return f}),n.d(e,"tsvParse",function(){return h}),n.d(e,"tsvParseRows",function(){return d}),n.d(e,"tsvFormat",function(){return m}),n.d(e,"tsvFormatRows",function(){return y})},ffd6:function(t,e,n){var r=n("3729"),i=n("1310"),o="[object Symbol]";function a(t){return"symbol"==typeof t||i(t)&&r(t)==o}t.exports=a}}]);
//# sourceMappingURL=lblb_MapPanelLoader.8f37a447.js.map